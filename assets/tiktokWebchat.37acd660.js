import{C as V,D as A,_ as M,d as Q,r as p,g as J,T as S,j as F,o as a,b as f,w as l,a as e,k as i,l as s,c as g,ch as W,q as w,n as D,ci as T,E as r,p as R,f as H}from"./index.5a90395c.js";const K="/user/assets/duihua1.d06e681a.jpg",O="/user/assets/duihua2.773e9780.jpg",X="/user/assets/duihua3.08c12757.jpg";function Y(m){return V.request({url:`/v6/base/generateWechatUrl?token=${A}`,method:"post",data:m})}function Z(){return V.request({url:`/v6/base/getLinkDetail?token=${A}`,method:"post"})}const v=m=>(R("data-v-442afe80"),m=m(),H(),m),ee={class:"tiktokWebchat"},ue={class:"tiktokWebchat-left"},te=v(()=>e("div",{class:"tiktokWebchat-top"}," \u57FA\u7840\u914D\u7F6E ",-1)),se={class:"left-content"},ae={class:"card_info"},oe={class:"card_info_top"},le={class:"avatar-uploader-box"},ie=["src"],ne={key:1,class:"avatar-uploader-icon"},de=v(()=>e("span",null,"\u70B9\u51FB\u4E0A\u4F20",-1)),ce={class:"card_top_input"},re={class:"card_info_bottom"},_e=["src"],pe={key:1,class:"avatar-uploader-icon"},me=v(()=>e("span",null,"\u70B9\u51FB\u6DFB\u52A0\u4E8C\u7EF4\u7801\u56FE\u7247",-1)),Fe={key:0,class:"qrcode-text"},ge={class:"card_btn"},ve=v(()=>e("p",null,"\u4F7F\u7528\u65B9\u6CD5\uFF1A\u5C06\u5706\u7801\u8BBE\u7F6E\u4E3Ady\u8FDB\u5165\u81EA\u52A8\u56DE\u590D\u5185\u5BB9\u5373\u53EF",-1)),he=v(()=>e("p",{style:{color:"red"}},"\u6709\u6548\u671F:\u5706\u7801\u751F\u6210\u540E\u56E0\u5E73\u53F0\u56E0\u7D20\u6709\u6548\u671F\u4E0D\u786E\u5B9A\u82E5\u53D1\u73B0\u5706\u7801\u5931\u6548\u9700\u91CD\u65B0\u751F\u6210",-1)),fe=v(()=>e("div",{class:"tiktokWebchat-right"},[e("div",{class:"tiktokWebchat-top"},"\u573A\u666F\u4ECB\u7ECD"),e("div",{class:"images_step"},[e("div",{class:"images_step_item"},[e("span",null,"\u7B2C\u4E00\u6B65\uFF1A\u8FDB\u5165\u79C1\u4FE1\u9875\u81EA\u52A8\u56DE\u590D\u5706\u7801"),e("img",{src:K,alt:""})]),e("div",{class:"images_step_item"},[e("span",null,"\u7B2C\u4E8C\u6B65\uFF1A\u8FDB\u5165\u8DF3\u8F6C\u9875\u70B9\u51FB\u8DF3\u8F6C"),e("img",{src:O,alt:""})]),e("div",{class:"images_step_item"},[e("span",null,"\u7B2C\u4E09\u6B65\uFF1A\u8FDB\u5165vx\u957F\u6309\u8BC6\u522B\u6DFB\u52A0\u597D\u53CB"),e("img",{src:X,alt:""})])])],-1)),Ee={class:"images_float_item"},ke={class:"images_float_close"},Be=["src"],De=Q({__name:"tiktokWebchat",setup(m){const C=p(""),E=p(0),h=p(!1),k=p(!1);let o=J({}),_=p({imageUrl:"",showImgUrl:""}),d=p({imageUrl:"",showImgUrl:""});const L=S(()=>!!(_.value.showImgUrl&&d.value.showImgUrl&&o.cardName&&o.introduce)),N=p(""),b=`http://admin.dev.o668.com/api/v6/base/uploadWechatImage?token=${A}`,j=u=>{_.value=u.data,r({message:"\u4E0A\u4F20\u6210\u529F",type:"success"})},q=u=>{let t=U(u);if(t.isJPG)t.isLt2M||r({message:"\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 2MB!",type:"warning"});else return r({message:"\u4E0A\u4F20\u56FE\u7247\u53EA\u80FD\u662F JPG/png/jpeg  \u683C\u5F0F!",type:"warning"}),!1},G=u=>{d.value=u.data,r({message:"\u4E0A\u4F20\u6210\u529F",type:"success"})},$=u=>{let t=U(u);if(t.isJPG){if(!t.isLt2M)return r({message:"\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 2MB!",type:"warning"}),!1}else return r({message:"\u4E0A\u4F20\u56FE\u7247\u53EA\u80FD\u662F JPG/png/jpeg \u683C\u5F0F!",type:"warning"}),!1},U=u=>{const n=["image/png","image/jpeg","image/jpg"].includes(u.type),B=u.size/1024/1024<2;return{isJPG:n,isLt2M:B}};(()=>{Z().then(u=>{o.cardName=u.data[0].card_name,o.introduce=u.data[0].card_introduce,_.value.imageUrl=u.data[0].weike_head_img_url,d.value.imageUrl=u.data[0].weike_qr_code_img_url,_.value.showImgUrl=u.data[0].head_img_url,d.value.showImgUrl=u.data[0].qr_code_img_url,N.value=u.data[0].urlValue,C.value=u.data[0].link_qr_code_oss_url,E.value=u.data[0].dyQrCodeExist})})();const x=u=>{let t={cardName:o.cardName,introduce:o.introduce,headImg:_.value.imageUrl,newQrImgData:d.value.imageUrl,reGenerateDyQrCode:u};h.value=!0,Y(t).then(n=>{n.code==200?(C.value=n.data.showLinkQrCodeUrl,r({message:"\u751F\u6210\u6210\u529F",type:"success"}),h.value=!1,E.value=1):(h.value=!1,r({message:n.msg,type:"error"}))})};return(u,t)=>{const n=F("el-icon"),B=F("el-upload"),I=F("el-input"),y=F("el-button"),P=F("el-link"),z=F("PageWrapper");return a(),f(z,{title:"\u6296\u8F6CV\u5DE5\u5177"},{default:l(()=>[e("div",ee,[e("div",ue,[te,e("div",se,[e("div",ae,[e("div",oe,[e("div",le,[i(B,{class:"avatar-uploader",action:b,"show-file-list":!1,"on-success":j,"before-upload":q,data:{type:1}},{default:l(()=>[s(_).showImgUrl?(a(),g("img",{key:0,style:{"max-width":"80px",height:"80px"},src:s(_).showImgUrl,class:"avatar"},null,8,ie)):(a(),g("div",ne,[i(n,{size:"24"},{default:l(()=>[i(s(W))]),_:1}),de]))]),_:1})]),e("div",ce,[i(I,{style:{width:"200px"},size:"small",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u540D\u79F0",modelValue:s(o).cardName,"onUpdate:modelValue":t[0]||(t[0]=c=>s(o).cardName=c)},null,8,["modelValue"]),i(I,{style:{width:"200px"},size:"small",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u4ECB\u7ECD",modelValue:s(o).introduce,"onUpdate:modelValue":t[1]||(t[1]=c=>s(o).introduce=c)},null,8,["modelValue"])])]),e("div",re,[i(B,{class:"avatar-uploader",action:b,"show-file-list":!1,"on-success":G,"before-upload":$,data:{type:2}},{default:l(()=>[s(d).showImgUrl?(a(),g("img",{key:0,style:{"max-width":"180px",height:"180px"},src:s(d).showImgUrl,class:"avatar"},null,8,_e)):(a(),g("div",pe,[i(n,{size:"24"},{default:l(()=>[i(s(W))]),_:1}),me]))]),_:1}),s(d).showImgUrl?w("",!0):(a(),g("span",Fe,"\u957F\u6309\u4E8C\u7EF4\u7801\u6DFB\u52A0\u597D\u53CB"))])]),e("div",ge,[!E.value&&!h.value?(a(),f(y,{key:0,type:"primary",disabled:!L.value,onClick:t[2]||(t[2]=c=>x(0))},{default:l(()=>[D("\u751F\u6210\u5706\u7801(\u6D88\u8017100\u70B9)")]),_:1},8,["disabled"])):h.value?(a(),f(y,{key:1,type:"primary",disabled:!0},{default:l(()=>[D("\u5706\u7801\u751F\u6210\u4E2D...")]),_:1})):(a(),f(y,{key:2,type:"primary",onClick:t[3]||(t[3]=c=>x(1))},{default:l(()=>[D("\u91CD\u65B0\u751F\u6210\u5706\u7801(\u6D88\u8017100\u70B9)")]),_:1})),ve,he,E.value?(a(),f(P,{key:3,onClick:t[4]||(t[4]=c=>k.value=!0)},{default:l(()=>[D("\u67E5\u770B\u5706\u7801")]),_:1})):w("",!0)])])]),fe,k.value?(a(),g("div",{key:0,class:"images_float",onClick:t[6]||(t[6]=c=>k.value=!1)},[e("div",Ee,[e("div",ke,[i(n,{onClick:t[5]||(t[5]=c=>k.value=!1),size:"26",color:"#000"},{default:l(()=>[i(s(T))]),_:1})]),e("img",{src:C.value,alt:"\u5706\u7801",style:{width:"200px",height:"200px"}},null,8,Be)])])):w("",!0)])]),_:1})}}}),we=M(De,[["__scopeId","data-v-442afe80"]]);export{we as default};
