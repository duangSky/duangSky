var f=(w,m,n)=>new Promise((g,l)=>{var i=o=>{try{t(n.next(o))}catch(r){l(r)}},c=o=>{try{t(n.throw(o))}catch(r){l(r)}},t=o=>o.done?g(o.value):Promise.resolve(o.value).then(i,c);t((n=n.apply(w,m)).next())});import{a as F}from"./account.f146a620.js";import{e as T,g as j}from"./machinery.c3c04c4e.js";import I from"./account-card.64e972bd.js";import{d as N,r as p,j as C,v as O,o as h,b as x,w as _,k as y,n as B,A as H,_ as L,E as v}from"./index.5a90395c.js";import"./index.101c175c.js";const M=N({__name:"set-tiktok-pop",emits:["renewClue"],setup(w,{expose:m,emit:n}){const g=n,l=p(!1),i=p([]),c=p(""),t=p([]),o=p(!1),r=()=>f(this,null,function*(){let s={filter:{type:"douyin"},op:{type:"="},page:1,limit:100};o.value=!0;let{code:u,data:d,msg:k}=yield F(s);u==200?(i.value=d.list,E()):v.error(k)}),E=()=>f(this,null,function*(){let{code:a,data:e,msg:s}=yield j({id:c.value});a==201?t.value=e.account.filter(u=>i.value.some(d=>d.id===u.id)):v.error(s),o.value=!1}),D=()=>{r()},V=({isChoose:a,account:e})=>{a?t.value=t.value.filter(s=>s.id!==e.id):t.value.push(e)},A=()=>f(this,null,function*(){let{code:a,msg:e}=yield T({id:c.value,account:t.value});a==200?(v.success("\u8BBE\u7F6E\u6210\u529F"),l.value=!1,g("renewClue")):v.error(e)}),P=()=>{c.value="",t.value=[]};return m({dialogVisible:l,accountId:c}),(a,e)=>{const s=C("el-scrollbar"),u=C("el-button"),d=C("el-dialog"),k=O("loading");return h(),x(d,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=b=>l.value=b),title:"\u8BBE\u7F6E\u6296\u97F3",width:"64%",draggable:"","close-on-click-modal":!1,onOpen:D,onClosed:P},{footer:_(()=>[y(u,{onClick:e[0]||(e[0]=b=>l.value=!1)},{default:_(()=>[B("\u53D6\u6D88")]),_:1}),y(u,{type:"primary",onClick:A},{default:_(()=>[B("\u786E\u5B9A")]),_:1})]),default:_(()=>[H((h(),x(s,null,{default:_(()=>[y(I,{accounts:i.value,selects:t.value,onHandleClickAccount:V},null,8,["accounts","selects"])]),_:1})),[[k,o.value]])]),_:1},8,["modelValue"])}}}),K=L(M,[["__scopeId","data-v-d4c2f88a"]]);export{K as default};
