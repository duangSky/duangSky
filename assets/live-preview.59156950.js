var w=(n,m,e)=>new Promise((i,u)=>{var p=s=>{try{o(e.next(s))}catch(c){u(c)}},x=s=>{try{o(e.throw(s))}catch(c){u(c)}},o=s=>s.done?i(s.value):Promise.resolve(s.value).then(p,x);o((e=e.apply(n,m)).next())});import{d as E,a0 as I,r as y,T as k,o as _,c as g,x as N,l as C,q as S,a as v,O as h,t as B,_ as R,E as j}from"./index.5a90395c.js";import{u as z}from"./mixShear.0f781a9f.js";import{p as D,a as G,b as O,c as V,d as W}from"./plat_xhs.a7d0325b.js";import{a as X}from"./creative.ea528d59.js";import{h as q}from"./make.3dd199c4.js";const A=["src"],K=["src"],U={class:"txt"},$={class:"title text-ellipsis-2"},F=["src"],H=E({__name:"live-preview",props:{preview:{type:Object,default:{}}},setup(n){const m=z(),{form:e}=I(m),i=y(""),u=y({}),p=y({}),x=n,o=t=>parseInt(Math.random()*(t-0+1)+0),s=()=>w(this,null,function*(){let{code:t,data:a,msg:f}=yield q({type:"fontStyle"});if(t==200){let b=o(a.length-1),d=o(a.length-1),l=a[b],r=a[d];u.value={WebkitTextStroke:l.outline_bord+"px "+l.outline_color,textShadow:l.shadow_x_shift+"px "+l.shadow_y_shift+"px "+l.shadow_blur+"px "+l.shadow_color,color:l.text_color,backgroundColor:l.text_background},p.value={WebkitTextStroke:r.outline_bord+"px "+r.outline_color,textShadow:r.shadow_x_shift+"px "+r.shadow_y_shift+"px "+r.shadow_blur+"px "+r.shadow_color,color:r.text_color,backgroundColor:r.text_background}}else j.error(f)}),c=t=>w(this,null,function*(){let a={type:["video","image"],ratio:e.value.scene_ratio,group:t},f={type:"in",ratio:"in",group:"in"},{code:b,data:d,msg:l}=yield X({filter:a,op:f});if(b==200){if(d.list.length){let r=o(d.list.length-1);i.value=d.list[r].cover_url}}else j.error(l)});(()=>{if(e.value.data.MaterialConfig===2){let t=o(e.value.data.MaterialGroup.length-1),a=e.value.data.MaterialGroup[t];c(a)}else{const t=o(e.value.data.Material.length-1);i.value=e.value.data.Material[t].cover_url}})(),s();const M=k(()=>({all:"",douyin:D,kuaishou:G,shipinhao:O,xigua:V,xiaohongshu:W})[x.preview.plat]),P=k(()=>{let t="";if(e.value.background==="image"){const a=o(e.value.data.Background.length-1);t=e.value.data.Background[a].cover_url}else e.value.background==="blur"&&(t=i.value);return t}),T=k(()=>e.value.scene_ratio.split(":").join("/"));return(t,a)=>(_(),g("div",{class:"livePreview",style:h(`background-color: ${C(e).background==="blur"?"transparent":"#000"}`)},[P.value?(_(),g("img",{key:0,class:N(["background",{vague:C(e).background==="blur"}]),src:P.value,alt:""},null,10,A)):S("",!0),M.value?(_(),g("img",{key:1,class:"plat",src:M.value,alt:""},null,8,K)):S("",!0),v("div",U,[v("div",$,[v("span",{style:h(u.value)},B(n.preview.title),5)]),v("div",{class:"tags text-ellipsis-1",style:h(p.value)},B(n.preview.oral),5)]),v("div",{class:"videoPreview",style:h({aspectRatio:T.value})},[i.value?(_(),g("img",{key:0,src:i.value,alt:""},null,8,F)):S("",!0)],4)],4))}}),ae=R(H,[["__scopeId","data-v-bb8a543c"]]);export{ae as default};
