var _=(d,U,o)=>new Promise((i,a)=>{var p=t=>{try{u(o.next(t))}catch(r){a(r)}},C=t=>{try{u(o.throw(t))}catch(r){a(r)}},u=t=>t.done?i(t.value):Promise.resolve(t.value).then(p,C);u((o=o.apply(d,U)).next())});import g from"./ali-cound-upload.18354a64.js";import{p as h}from"./aitools.ae73576d.js";import{d as V,r as x,j as v,o as c,b as B,w as f,c as y,y as E,k as F,a as S,n as b,F as T,_ as z,E as D}from"./index.5a90395c.js";const R={class:"bottom"},L=["src"],N={key:1,class:"tip"},$=V({__name:"sample-list",props:{voiceId:{type:String,require:!0},reads:{type:Array,required:!0},beforeUpload:{type:Function,default:function(){}},uploadSuccessed:{type:Function,default:function(){}}},emits:["setReadsItemUrl"],setup(d,{emit:U}){const o=x(""),i=x(),a=d,p=U,C=()=>_(this,null,function*(){return a.beforeUpload(),!0}),u=e=>{a.uploadSuccessed(e);const l=a.reads.find(n=>n.AudioId===o.value);p("setReadsItemUrl",{item:l,url:e.audioUrl}),t(e)},t=e=>_(this,null,function*(){const l=a.reads.find(s=>s.AudioId===o.value),n=l.Text.split("\u3001");let{code:m,msg:I}=yield h({voiceId:a.voiceId,recordUrl:e.recordUrl,audioUrl:e.audioUrl,audioText:n[1],audioRecordId:o.value});m==200?console.log("\u58F0\u97F3\u68C0\u6D4B\u6210\u529F"):(D.error(I),p("setReadsItemUrl",{item:l,url:""}))}),r=e=>{window.open(e.DemoAudio)},A=(e,l)=>_(this,null,function*(){o.value=e.AudioId,i.value[l].handleFileClick()});return(e,l)=>{const n=v("el-input"),m=v("el-button"),I=v("el-scrollbar");return c(),B(I,{height:"360px"},{default:f(()=>[(c(!0),y(T,null,E(d.reads,(s,w)=>(c(),y("div",{class:"readItem",key:s.AudioId},[F(n,{modelValue:s.Text,"onUpdate:modelValue":k=>s.Text=k,type:"textarea",rows:2,resize:"none"},null,8,["modelValue","onUpdate:modelValue"]),S("div",R,[F(m,{type:"primary",size:"small",onClick:k=>r(s)},{default:f(()=>[b("\u8BD5\u542C")]),_:2},1032,["onClick"]),F(g,{ref_for:!0,ref_key:"fileUpload",ref:i,accept:".wav,.pcm",multiple:!1,beforeUpload:C,uploadSuccessed:u},{fileUpload:f(()=>[F(m,{type:"primary",size:"small",onClick:k=>A(s,w)},{default:f(()=>[b("\u4E0A\u4F20\u6587\u4EF6")]),_:2},1032,["onClick"])]),_:2},1536),s.url?(c(),y("audio",{key:0,controls:"",src:s.url},null,8,L)):(c(),y("span",N,"\u97F3\u9891\u683C\u5F0F\u5FC5\u987B\u662Fwav\u6216pcm\u683C\u5F0F"))])]))),128))]),_:1})}}}),G=z($,[["__scopeId","data-v-26b9fc42"]]);export{G as default};
