var N=(k,y,p)=>new Promise((U,C)=>{var b=i=>{try{d(p.next(i))}catch(v){C(v)}},z=i=>{try{d(p.throw(i))}catch(v){C(v)}},d=i=>i.done?U(i.value):Promise.resolve(i.value).then(b,z);d((p=p.apply(k,y)).next())});import{d as H}from"./vuedraggable.umd.dc61d486.js";import{d as J,a0 as Q,r as c,U as W,j as r,o as n,b as g,w as o,k as t,n as h,c as f,y as E,l as D,F as B,a as X,t as x,x as P,_ as Y,E as Z}from"./index.5a90395c.js";import{u as ee}from"./material.85a80f57.js";import{i as ue}from"./index.0e306189.js";import{t as le,b as ae}from"./index.101c175c.js";import"./creative.ea528d59.js";import"./keyword.011c6f30.js";const oe=["onClick"],te=["onClick"],ie=J({__name:"combo-pop",props:{num:{type:Number,default:1}},emits:["handleAddCombo"],setup(k,{expose:y,emit:p}){const U=k,C=p,b=ee(),{getkeywords:z}=b,{keywords:d}=Q(b),i=c(!1),v=c(""),j=c(),l=c({group:"",zhuci:[],titleRules:["diqu","pinpai","zhuci","houzhui","maidian","kaichang","jieshao","jiewei"],tagsNumber:5,tagsPosition:1,mode:"random"}),A=c([]),q=c({group:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u8BCD\u7EC4",trigger:"change"}]}),V=c([{value:"diqu",label:"\u5730\u533A\u8BCD",isUse:!0},{value:"pinpai",label:"\u54C1\u724C\u8BCD",isUse:!0},{value:"zhuci",label:"\u4EA7\u54C1\u8BCD",isUse:!0},{value:"houzhui",label:"\u5173\u8054\u8BCD",isUse:!0},{value:"maidian",label:"\u5356\u70B9\u8BCD",isUse:!0},{value:"kaichang",label:"\u5F00\u573A\u767D",isUse:!0},{value:"jieshao",label:"\u5185\u5BB9\u4ECB\u7ECD",isUse:!0},{value:"jiewei",label:"\u7ED3\u5C3E",isUse:!0}]),S=()=>{z()},T=a=>{let u=d.value.find(m=>m.id===a);A.value=u.zhuci,l.value.zhuci=[]},$=a=>{if(l.value.titleRules.length<=1&&a.isUse){Z.warning("\u6700\u5C11\u9009\u4E2D\u4E00\u4E2A\u6807\u9898\u7EC4\u5408\u6761\u4EF6");return}a.isUse=!a.isUse,l.value.titleRules=V.value.filter(u=>u.isUse).map(u=>u.value)},I=a=>{l.value.mode=a.value},K=()=>N(this,null,function*(){try{yield j.value.validate();let a=d.value.find(s=>s.id===l.value.group),u={diqu:a.diqu,pinpai:a.pinpai,zhuci:l.value.zhuci.length?l.value.zhuci.map(s=>({name:s})):a.zhuci,houzhui:a.houzhui,maidian:a.maidian,kaichang:a.kaichang,jieshao:a.jieshao,jiewei:a.jiewei},m={groupRules:["diqu","pinpai","zhuci","houzhui","maidian","kaichang","jieshao","jiewei"],keySorts:l.value.titleRules,tagsNumber:l.value.tagsNumber,tagsPosition:l.value.tagsPosition,mode:l.value.mode},_=ue(u,m,U.num);C("handleAddCombo",{id:v.value,str:_}),i.value=!1}catch(a){console.log(a)}}),M=()=>{console.log("\u5173\u95ED\u5F39\u7A97")};return W(()=>V.value,a=>{l.value.titleRules=a.filter(u=>u.isUse).map(u=>u.value)},{deep:!0}),y({dialogVisible:i,videoId:v}),(a,u)=>{const m=r("el-option"),_=r("el-select"),s=r("el-form-item"),R=r("el-radio"),O=r("el-radio-group"),L=r("el-form"),F=r("el-button"),G=r("el-dialog");return n(),g(G,{modelValue:i.value,"onUpdate:modelValue":u[5]||(u[5]=e=>i.value=e),title:"\u4F5C\u54C1\u6807\u9898\u3001\u8BDD\u9898\u8BBE\u7F6E",draggable:"",width:"724","destroy-on-close":"",onOpen:S,onClose:M},{footer:o(()=>[t(F,{onClick:u[4]||(u[4]=e=>i.value=!1)},{default:o(()=>[h("\u53D6\u6D88")]),_:1}),t(F,{type:"primary",onClick:K},{default:o(()=>[h("\u786E\u5B9A")]),_:1})]),default:o(()=>[t(L,{ref_key:"formRef",ref:j,rules:q.value,model:l.value,"label-position":"top"},{default:o(()=>[t(s,{label:"\u5173\u952E\u8BCD\u7EC4",prop:"group"},{default:o(()=>[t(_,{modelValue:l.value.group,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value.group=e),placeholder:"\u8BF7\u9009\u62E9\u5173\u952E\u8BCD\u7EC4",onChange:T},{default:o(()=>[(n(!0),f(B,null,E(D(d),e=>(n(),g(m,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u4EA7\u54C1\u8BCD"},{default:o(()=>[t(_,{modelValue:l.value.zhuci,"onUpdate:modelValue":u[1]||(u[1]=e=>l.value.zhuci=e),multiple:"",clearable:"",placeholder:"\u4E0D\u9009\u5219\u9ED8\u8BA4\u8BCD\u7EC4\u4E0B\u5168\u90E8\u4EA7\u54C1\u8BCD"},{default:o(()=>[(n(!0),f(B,null,E(A.value,(e,w)=>(n(),g(m,{key:w,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6807\u9898\u7EC4\u5408\u89C4\u5219"},{default:o(()=>[t(D(H),{class:"btns",animation:"300",list:V.value,group:"title",itemKey:"value"},{item:o(({element:e})=>[X("div",{class:P(["btn",{choose:e.isUse}]),onClick:w=>$(e)},x(e.label),11,oe)]),_:1},8,["list"])]),_:1}),t(s,{label:"\u8BDD\u9898\u6570\u91CF",class:"topic"},{default:o(()=>[t(_,{modelValue:l.value.tagsNumber,"onUpdate:modelValue":u[2]||(u[2]=e=>l.value.tagsNumber=e)},{default:o(()=>[(n(!0),f(B,null,E(D(le),e=>(n(),g(m,{key:e.value,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),t(O,{modelValue:l.value.tagsPosition,"onUpdate:modelValue":u[3]||(u[3]=e=>l.value.tagsPosition=e)},{default:o(()=>[t(R,{label:1},{default:o(()=>[h("\u8BDD\u9898\u5728\u540E")]),_:1}),t(R,{label:2},{default:o(()=>[h("\u8BDD\u9898\u5728\u524D")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u8BDD\u9898\u89C4\u5219"},{default:o(()=>[(n(!0),f(B,null,E(D(ae),e=>(n(),f("div",{class:P(["btn",{choose:l.value.mode===e.value}]),key:e.value,onClick:w=>I(e)},x(e.label),11,te))),128))]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])}}}),_e=Y(ie,[["__scopeId","data-v-44cf3749"]]);export{_e as default};
