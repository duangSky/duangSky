var te=Object.defineProperty;var P=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var j=(p,c,d)=>c in p?te(p,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):p[c]=d,$=(p,c)=>{for(var d in c||(c={}))de.call(c,d)&&j(p,d,c[d]);if(P)for(var d of P(c))ne.call(c,d)&&j(p,d,c[d]);return p};var L=(p,c,d)=>new Promise((V,e)=>{var D=_=>{try{A(d.next(_))}catch(k){e(k)}},C=_=>{try{A(d.throw(_))}catch(k){e(k)}},A=_=>_.done?V(_.value):Promise.resolve(_.value).then(D,C);A((d=d.apply(p,c)).next())});import{d as se,a0 as W,i as ie,r as F,T as re,W as me,j as b,o as i,c as h,k as u,w as t,l as o,a as r,F as M,y,b as g,t as N,q as z,n as G,E as J,_ as pe,p as ce,f as fe}from"./index.5a90395c.js";import{u as _e}from"./imgText.df790733.js";import{u as ve}from"./audio.e4943d80.js";import be from"./material-cover.94941517.js";import he from"./work-material.25134b77.js";import O from"./background-music.c6be600d.js";import{H as Me}from"./HotMusic.c1d9e9b3.js";import{R as ye}from"./RecommendMusic.7c828e52.js";import{t as ge,m as ke,u as Ae,g as Fe,h as Ve}from"./index.2523f7b1.js";import{s as Ce}from"./make.3dd199c4.js";import"./material.85a80f57.js";import"./creative.ea528d59.js";import"./keyword.011c6f30.js";import"./ImportMeterial.9b103172.js";import"./index.browser.2b0920b0.js";import"./AliCloudUpload.13488d40.js";import"./Pagination.554cb32d.js";import"./audio.531569af.js";import"./index.0e306189.js";import"./background-config.61fe2eab.js";import"./MediumPreview.37c6af48.js";import"./material-card.f7d63667.js";import"./music-card.2b625142.js";import"./dateUtil.67c53eed.js";import"./index.89ddba91.js";const E=p=>(ce("data-v-39d99c97"),p=p(),fe(),p),De={class:"second"},Re={class:"workMaterial"},Ne=E(()=>r("i",{class:"iconfont icon-plus-square"},null,-1)),Ee={class:"coverMaterial"},Se={class:"Tiktok"},we={class:"top"},Be={class:"choose"},Ue=E(()=>r("span",null,"\u70ED\u95E8\u97F3\u4E50",-1)),xe={class:"Kwak"},Ke={class:"top"},He={class:"choose"},Ie=E(()=>r("span",null,"\u70ED\u95E8\u97F3\u4E50",-1)),Te={class:"foot_btns"},qe=se({__name:"third-config",emits:["handleStepChange"],setup(p,{emit:c}){const d=_e(),V=ve(),{form:e}=W(d),{audioRef:D}=W(V),{handleInit:C}=V,A=c,_=ie(),k=F(),S=F(),w=F(),B=F(),U=F(),x=s=>{A("handleStepChange",s)},Q=()=>{e.value.data.Material=[],e.value.data.Scene=[[]],e.value.data.AppointNum="",e.value.data.RandomNum=[],e.value.data.NumMode=1,e.value.data.AppointNum=e.value.data.Scene.length},X=()=>{e.value.data.Scene.push([]),e.value.data.AppointNum=e.value.data.Scene.length},K=s=>{s==="AudioDouyin"?B.value.drawer=!0:U.value.drawer=!0},Y=s=>{let l=[...e.value.data.AudioDouyin,...s],n={};e.value.data.AudioDouyin=l.reduce((m,f)=>(n[f.id]||(n[f.id]=m.push(f)),m),[])},Z=s=>{let l=[...e.value.data.AudioKuaishou,...s],n={};e.value.data.AudioKuaishou=l.reduce((m,f)=>(n[f.id]||(n[f.id]=m.push(f)),m),[])},H=(s,l)=>{e.value.data[l]=e.value.data[l].filter(n=>n.id!==s.id)},ee=()=>{let s=[k.value.validate(),S.value.proof()];e.value.video_cover===1&&s.push(w.value.formRef.validate()),Promise.all(s).then(()=>L(this,null,function*(){console.log("\u4FDD\u5B58\u9884\u89C8",e.value);let l=$({},e.value);_.query.id&&(l.id=_.query.id);let{code:n,msg:m}=yield Ce(l);n==200?(J.success("\u4EFB\u52A1\u4FDD\u5B58\u6210\u529F"),x(1)):J.error(m)})).catch(l=>{console.log(l)})},R=re(()=>s=>e.value.data.MaterialConfig===1?s>e.value.data.Material.length:s>e.value.data.Scene.length),ae=()=>{C()};return me(()=>{C()}),(s,l)=>{const n=b("el-option"),m=b("el-select"),f=b("el-button"),v=b("el-form-item"),le=b("el-input"),I=b("el-switch"),T=b("DArrowRight"),q=b("el-icon"),oe=b("el-form"),ue=b("el-scrollbar");return i(),h("div",De,[u(ue,null,{default:t(()=>[u(oe,{class:"outForm",ref_key:"formRef",ref:k,model:o(e),rules:o(ge),"label-width":"134"},{default:t(()=>[u(v,{label:"\u7D20\u6750\u6DFB\u52A0\u6A21\u5F0F",prop:"data.MaterialConfig"},{default:t(()=>[r("div",Re,[u(m,{modelValue:o(e).data.MaterialConfig,"onUpdate:modelValue":l[0]||(l[0]=a=>o(e).data.MaterialConfig=a),onChange:Q},{default:t(()=>[(i(!0),h(M,null,y(o(ke),a=>(i(),g(n,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),o(e).data.MaterialConfig===2?(i(),g(f,{key:0,type:"primary",disabled:o(e).data.Scene.length==5,onClick:X},{default:t(()=>[Ne,r("span",null,"\u6DFB\u52A0\u573A\u666F "+N(o(e).data.Scene.length)+"/5",1)]),_:1},8,["disabled"])):z("",!0),u(he,{ref_key:"workMaterialRef",ref:S},null,512)])]),_:1}),u(v,{label:"\u5355\u56FE\u6587\u4F7F\u7528\u7D20\u6750\u6570",prop:"data.NumMode",class:"useMode"},{default:t(()=>[u(m,{modelValue:o(e).data.NumMode,"onUpdate:modelValue":l[1]||(l[1]=a=>o(e).data.NumMode=a),disabled:o(e).data.MaterialConfig===2},{default:t(()=>[(i(!0),h(M,null,y(o(Ae),a=>(i(),g(n,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"]),o(e).data.NumMode===1?(i(),g(v,{key:0,prop:"data.AppointNum"},{default:t(()=>[u(m,{modelValue:o(e).data.AppointNum,"onUpdate:modelValue":l[2]||(l[2]=a=>o(e).data.AppointNum=a),disabled:o(e).data.MaterialConfig===2},{default:t(()=>[(i(),h(M,null,y(10,a=>u(n,{key:a,value:a,label:a,disabled:R.value(a)},null,8,["value","label","disabled"])),64))]),_:1},8,["modelValue","disabled"])]),_:1})):(i(),h(M,{key:1},[u(v,{prop:"data.RandomNum[0]",style:{padding:"0","margin-right":"16px"}},{default:t(()=>[u(m,{modelValue:o(e).data.RandomNum[0],"onUpdate:modelValue":l[3]||(l[3]=a=>o(e).data.RandomNum[0]=a)},{default:t(()=>[(i(),h(M,null,y(10,a=>u(n,{key:a,value:a,label:a,disabled:a>=o(e).data.RandomNum[1]||R.value(a)},null,8,["value","label","disabled"])),64))]),_:1},8,["modelValue"])]),_:1}),u(v,{prop:"data.RandomNum[1]"},{default:t(()=>[u(m,{modelValue:o(e).data.RandomNum[1],"onUpdate:modelValue":l[4]||(l[4]=a=>o(e).data.RandomNum[1]=a)},{default:t(()=>[(i(),h(M,null,y(10,a=>u(n,{key:a,value:a,label:a,disabled:a<=o(e).data.RandomNum[0]||R.value(a)},null,8,["value","label","disabled"])),64))]),_:1},8,["modelValue"])]),_:1})],64))]),_:1}),u(v,{label:"\u7D20\u6750\u4F7F\u7528\u6A21\u5F0F",prop:"data.MaterialUseMode"},{default:t(()=>[u(m,{modelValue:o(e).data.MaterialUseMode,"onUpdate:modelValue":l[5]||(l[5]=a=>o(e).data.MaterialUseMode=a)},{default:t(()=>[(i(!0),h(M,null,y(o(Fe),a=>(i(),g(n,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(v,{label:"\u53EF\u53D1\u6570\u91CF",prop:"data.PublishNum"},{default:t(()=>[u(le,{modelValue:o(e).data.PublishNum,"onUpdate:modelValue":l[6]||(l[6]=a=>o(e).data.PublishNum=a),disabled:"",style:{width:"220px"}},null,8,["modelValue"])]),_:1}),u(v,{label:"\u5C01\u9762\u7D20\u6750",prop:"video_cover"},{default:t(()=>[r("div",Ee,[u(m,{modelValue:o(e).video_cover,"onUpdate:modelValue":l[7]||(l[7]=a=>o(e).video_cover=a)},{default:t(()=>[(i(!0),h(M,null,y(o(Ve),a=>(i(),g(n,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),o(e).video_cover===1?(i(),g(be,{key:0,ref_key:"coverRef",ref:w},null,512)):z("",!0)]),_:1}),u(v,{label:"\u6296\u97F3\u80CC\u666F\u97F3\u4E50",prop:"audio_douyin"},{default:t(()=>[r("div",Se,[r("div",we,[u(I,{modelValue:o(e).audio_douyin,"onUpdate:modelValue":l[8]||(l[8]=a=>o(e).audio_douyin=a)},null,8,["modelValue"]),r("span",Be,"\u5DF2\u9009\uFF1A"+N(o(e).data.AudioDouyin.length||"\u5168\u90E8"),1),r("div",{class:"pick hot",onClick:l[9]||(l[9]=a=>K("AudioDouyin"))},[Ue,u(q,null,{default:t(()=>[u(T)]),_:1})])]),u(O,{musics:o(e).data.AudioDouyin,onHandleDelete:l[10]||(l[10]=a=>H(a,"AudioDouyin"))},null,8,["musics"])])]),_:1}),u(v,{label:"\u5FEB\u624B\u80CC\u666F\u97F3\u4E50",prop:"audio_kuaishou"},{default:t(()=>[r("div",xe,[r("div",Ke,[u(I,{modelValue:o(e).audio_kuaishou,"onUpdate:modelValue":l[11]||(l[11]=a=>o(e).audio_kuaishou=a)},null,8,["modelValue"]),r("span",He,"\u5DF2\u9009\uFF1A"+N(o(e).data.AudioKuaishou.length||"\u5168\u90E8"),1),r("div",{class:"pick hot",onClick:l[12]||(l[12]=a=>K("AudioKuaishou"))},[Ie,u(q,null,{default:t(()=>[u(T)]),_:1})])]),u(O,{musics:o(e).data.AudioKuaishou,pattern:"imgText",onHandleDelete:l[13]||(l[13]=a=>H(a,"AudioKuaishou"))},null,8,["musics"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),r("div",Te,[u(f,{plain:"",onClick:l[14]||(l[14]=a=>x(-1))},{default:t(()=>[G("\u4E0A\u4E00\u6B65")]),_:1}),u(f,{type:"primary",onClick:ee},{default:t(()=>[G("\u4FDD\u5B58\u4EFB\u52A1")]),_:1})]),r("audio",{ref_key:"audioRef",ref:D,onEnded:ae},null,544),u(Me,{ref_key:"hotMusicRef",ref:B,onHandleAddMusic:Y},null,512),u(ye,{ref_key:"recommendMusicRef",ref:U,onHandleAddMusic:Z},null,512)])}}}),ca=pe(qe,[["__scopeId","data-v-39d99c97"]]);export{ca as default};
