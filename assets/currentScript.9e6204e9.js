var J=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var F=(t,o,e)=>o in t?J(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,w=(t,o)=>{for(var e in o||(o={}))P.call(o,e)&&F(t,e,o[e]);if(g)for(var e of g(o))R.call(o,e)&&F(t,e,o[e]);return t},y=(t,o)=>L(t,O(o));var f=(t,o,e)=>new Promise((s,d)=>{var i=u=>{try{c(e.next(u))}catch(m){d(m)}},_=u=>{try{c(e.throw(u))}catch(m){d(m)}},c=u=>u.done?s(u.value):Promise.resolve(u.value).then(i,_);c((e=e.apply(t,o)).next())});import{_ as U,d as z,h as T,r as p,j as n,v as j,o as h,b as S,w as r,k as l,a as C,n as q,A as G,x as H,E,p as M,f as K}from"./index.5a90395c.js";import Q from"./PageLayout.315a6bcb.js";import X from"./CreateWrite.c595f8c3.js";import{w as Y,x as Z}from"./aitools.ae73576d.js";import"./AIToolPop.b04822dd.js";import"./useCopyToClipboard.fba770f6.js";const $=t=>(M("data-v-18399780"),t=t(),K(),t),ee={class:"btn"},te=$(()=>C("span",null,"\u751F\u6210\u811A\u672C",-1)),oe=z({__name:"currentScript",setup(t){const o=T(),e=p(!1),s=p(!1),d=p(),i=p({keyword:""}),_=p(""),c=p([]),u={keyword:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",trigger:"blur"}]},m=()=>f(this,null,function*(){try{yield d.value.validate(),_.value="",e.value=!0,s.value=!0,Y({data:y(w({},i.value),{sse:1}),onopen:()=>e.value=!1,onmessage:a=>{JSON.parse(a.data).type==="ernie"?_.value+=JSON.parse(a.data).content:c.value=JSON.parse(a.data).content},finallyHandler:()=>s.value=!1})}catch(a){console.log(a)}}),k=()=>f(this,null,function*(){if(s.value)return;let{code:a,msg:v}=yield Z({submitData:c.value});a==200?(E.success("\u751F\u6210\u811A\u672C\u6210\u529F"),setTimeout(()=>{o.push("/make/video/mineScript")},1e3)):E.error(v)});return(a,v)=>{const B=n("el-input"),b=n("el-form-item"),D=n("el-button"),x=n("el-form"),A=n("SetUp"),V=n("el-icon"),N=n("PageWrapper"),I=j("selfLoading");return h(),S(N,{regain:"\u901A\u7528\u77ED\u89C6\u9891\u811A\u672C"},{default:r(()=>[l(Q,null,{set:r(()=>[l(x,{ref_key:"ruleFormRef",ref:d,model:i.value,rules:u,"label-position":"top"},{default:r(()=>[l(b,{label:"\u5173\u952E\u8BCD",prop:"keyword"},{default:r(()=>[l(B,{modelValue:i.value.keyword,"onUpdate:modelValue":v[0]||(v[0]=W=>i.value.keyword=W),type:"textarea",maxlength:"200","show-word-limit":"",resize:"none",rows:4,placeholder:"\u53EF\u586B\u5199\u4EA7\u54C1\u540D\u79F0\u3001\u4EA7\u54C1\u5356\u70B9\u3001\u54C1\u724C/\u516C\u53F8\u540D\u79F0\u7B49\u76F8\u5173\u7684\u5173\u952E\u8BCD\uFF0C\u4E0D\u540C\u5173\u952E\u8BCD\u4E4B\u95F4\u4EE5\u987F\u53F7\u9694\u5F00"},null,8,["modelValue"])]),_:1}),C("div",ee,[l(D,{type:"primary",loading:s.value,style:{width:"350px"},onClick:m},{default:r(()=>[q("\u7ACB\u5373\u751F\u6210")]),_:1},8,["loading"])])]),_:1},8,["model"])]),preview:r(()=>[G((h(),S(X,{"element-loading-background":"rgba(122, 122, 122, 0.8)",writes:_.value},{other:r(()=>[C("div",{class:H(["script",{disable:s.value}]),onClick:k},[l(V,null,{default:r(()=>[l(A)]),_:1}),te],2)]),_:1},8,["writes"])),[[I,e.value]])]),_:1})]),_:1})}}}),ce=U(oe,[["__scopeId","data-v-18399780"]]);export{ce as default};
