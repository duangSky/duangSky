var C=(p,v,s)=>new Promise((d,t)=>{var i=o=>{try{n(s.next(o))}catch(r){t(r)}},m=o=>{try{n(s.throw(o))}catch(r){t(r)}},n=o=>o.done?d(o.value):Promise.resolve(o.value).then(i,m);n((s=s.apply(p,v)).next())});import{d as V,a0 as h,r as u,ab as q,W as z,j as g,o as y,b,a as S,z as M,k as T,w as A,q as B,a5 as R,_ as U,E as W}from"./index.5a90395c.js";import{u as $}from"./material.85a80f57.js";import{u as F}from"./mixShear.0f781a9f.js";import{f as G}from"./make.3dd199c4.js";import H from"./live-preview.59156950.js";import{a as J,g as E}from"./index.0e306189.js";import"./creative.ea528d59.js";import"./keyword.011c6f30.js";import"./plat_xhs.a7d0325b.js";const K=["onClick"],L=V({__name:"preview-pop",props:{hideOnClickModal:{type:Boolean,default:!0}},setup(p,{expose:v}){const s=F(),d=$(),{form:t,makeData:i}=h(s),{handleClear:m}=s,{getkeywords:n}=d,{keywords:o}=h(d),r=u(!1),O=u(q(J)),w=u(""),f=u({plat:"douyin",title:"",oral:"",topic:""}),_=u(!1),P=()=>{_.value=!0,j(),n()},k=()=>{_.value=!1},j=()=>C(this,null,function*(){let{code:l,data:a,msg:c}=yield G({id:w.value});if(l==200){for(let e in t.value)e==="scene_title"||e==="video_title"||e==="voice_subtitle"||e==="audio"?t.value[e]=!!a[e]:t.value[e]=a[e];D()}else W.error(c);r.value=!0}),D=()=>{let l=o.value.find(a=>a.id===t.value.keyword);for(let a in i.value)i.value[a]=l[a];I(),N()},I=()=>{let l=E(i.value,t.value.data.Title,t.value.data.Title);f.value.title=l.join("")},N=()=>{let l=E(i.value,t.value.data.Subtitle,t.value.data.Subtitle);t.value.data.Subtitle.forEach((a,c)=>{let e=O.value.find(x=>x.label===a);(e==null?void 0:e.type)==="select"&&(l[c]=e.label)}),f.value.oral=l.join("")};return z(()=>{m()}),v({mixId:w,handleOpen:P}),(l,a)=>{const c=g("Close"),e=g("el-icon");return _.value?(y(),b(R,{key:0,to:"body"},[S("div",{class:"mixPreview",onClick:a[0]||(a[0]=M(x=>p.hideOnClickModal&&k(),["self"]))},[S("div",{class:"closeIco",onClick:M(k,["stop"])},[T(e,null,{default:A(()=>[T(c)]),_:1})],8,K),r.value?(y(),b(H,{key:0,preview:f.value},null,8,["preview"])):B("",!0)])])):B("",!0)}}}),ie=U(L,[["__scopeId","data-v-ed771030"]]);export{ie as default};
