var Q=Object.defineProperty;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(c,t,a)=>t in c?Q(c,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[t]=a,R=(c,t)=>{for(var a in t||(t={}))X.call(t,a)&&D(c,a,t[a]);if(P)for(var a of P(t))Y.call(t,a)&&D(c,a,t[a]);return c};var U=(c,t,a)=>new Promise((b,m)=>{var r=u=>{try{_(a.next(u))}catch(f){m(f)}},p=u=>{try{_(a.throw(u))}catch(f){m(f)}},_=u=>u.done?b(u.value):Promise.resolve(u.value).then(r,p);_((a=a.apply(c,t)).next())});import{_ as Z,d as ee,i as ae,r as n,T as le,bx as se,j as B,o as F,b as V,w as h,a as i,k as v,c as j,y as I,l as w,F as N,n as E,t as x,$ as te,E as $,cj as oe}from"./index.5a90395c.js";import{P as ue}from"./Pagination.554cb32d.js";import ne from"./task-cards.cb1d17fa.js";import ce from"./compose-pop.ca4bf594.js";import{w as re}from"./make.3dd199c4.js";import{s as ie,a as de}from"./index.458bd848.js";import"./index.browser.2b0920b0.js";import"./downloadFile.9a38d16c.js";import"./MediumPreview.37c6af48.js";import"./video-preview.bc5a5dfa.js";const ve={class:"top"},pe={class:"ipt"},me={class:"btns"},_e={class:"type"},fe={class:"choose"},ke={class:"ratio"},he={class:"cards"},Ce={class:"foot"},ge=ee({__name:"task",setup(c){const t=ae(),a=n(),b=n(!1),m=n(),r=n([]),p=n([]),_=n(0),u=n(0),f=n(0),S=n(),d=n({status:"",score:""}),y=n({page:1,limit:18}),C=()=>U(this,null,function*(){let s={},e={};d.value.status!==""&&(s.status=d.value.status,e.status="="),d.value.score&&(s.score=d.value.score,e.score="between");let g=R({id:t.query.id,filter:s,op:e},y.value),{code:k,data:o,msg:T}=yield re(g);k==200?(p.value=o.list,f.value=o.total,_.value=o.wait_num,u.value=o.finish_num,S.value=setTimeout(()=>{C()},3e3)):k==201?(p.value=o.list,f.value=o.total,_.value=o.wait_num,u.value=o.finish_num):$.error(T)});C();const A=(s,e)=>{y.value.page=1,d.value[e]=s,C()},q=s=>{y.value.page=s,C()},z=s=>{y.value.limit=s,C()},H=s=>{s?(m.value.checkedTasks=p.value.map(e=>e.id),r.value=p.value.map(e=>e)):r.value=m.value.checkedTasks=[]},L=s=>{b.value=s},M=s=>{let e=[];s.forEach(g=>{let k=p.value.find(o=>o.id===g);e.push(k)}),r.value=e},W=()=>{window.open(`${oe}${t.query.id}`)},G=()=>{if(!r.value.length){$.warning("\u8BF7\u9009\u62E9\u8981\u5408\u6210\u89C6\u9891\u7684\u521B\u4F5C\u4EFB\u52A1");return}console.log(r.value),a.value.dialogVisible=!0},J=()=>{r.value=[],m.value.checkedTasks=[],C()},K=le(()=>r.value.length);return se(()=>{clearTimeout(S.value)}),(s,e)=>{const g=B("el-option"),k=B("el-select"),o=B("el-button"),T=B("el-checkbox"),O=B("el-scrollbar");return F(),V(w(te),{regain:"\u521B\u4F5C\u4EFB\u52A1"},{default:h(()=>[i("div",ve,[i("div",pe,[v(k,{modelValue:d.value.status,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.status=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5408\u6210\u72B6\u6001",onChange:e[1]||(e[1]=l=>A(l,"status"))},{default:h(()=>[(F(!0),j(N,null,I(w(ie),l=>(F(),V(g,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),v(k,{modelValue:d.value.score,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.score=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u89C6\u9891\u8D28\u91CF",onChange:e[3]||(e[3]=l=>A(l,"score"))},{default:h(()=>[(F(!0),j(N,null,I(w(de),l=>(F(),V(g,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),i("div",me,[v(o,{plain:"",onClick:W},{default:h(()=>[E("\u7EE7\u7EED\u521B\u4F5C")]),_:1}),v(o,{type:"primary",onClick:G},{default:h(()=>[E("\u5408\u6210\u89C6\u9891")]),_:1})])]),i("div",_e,[v(T,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=l=>b.value=l),onChange:H},{default:h(()=>[E("\u5168\u9009")]),_:1},8,["modelValue"]),i("div",fe,[E("\u5DF2\u9009 "),i("span",null,x(K.value),1)]),i("div",ke,[E("\u5F85\u5408\u6210/\u5DF2\u5408\u6210 "),i("span",null,x(_.value)+"/"+x(u.value),1)])]),i("div",he,[v(O,null,{default:h(()=>[v(ne,{ref_key:"taskCardsRef",ref:m,tasks:p.value,onSetIsAll:L,onSetChecked:M},null,8,["tasks"])]),_:1})]),i("div",Ce,[v(ue,{pages:y.value,total:f.value,onHandleCurrentChange:q,onHandleSizeChange:z},null,8,["pages","total"])]),v(ce,{ref_key:"composePopRef",ref:a,checkedTasks:r.value,onComposeSuccess:J},null,8,["checkedTasks"])]),_:1})}}}),Pe=Z(ge,[["__scopeId","data-v-22a120ba"]]);export{Pe as default};
