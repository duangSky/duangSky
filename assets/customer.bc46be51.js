var ce=Object.defineProperty;var W=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var G=(o,u,e)=>u in o?ce(o,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[u]=e,Q=(o,u)=>{for(var e in u||(u={}))_e.call(u,e)&&G(o,e,u[e]);if(W)for(var e of W(u))re.call(u,e)&&G(o,e,u[e]);return o};var U=(o,u,e)=>new Promise((M,A)=>{var y=m=>{try{E(e.next(m))}catch(F){A(F)}},k=m=>{try{E(e.throw(m))}catch(F){A(F)}},E=m=>m.done?M(m.value):Promise.resolve(m.value).then(y,k);E((e=e.apply(o,u)).next())});import{t as de}from"./element-china-area-data.31b4d230.js";import{f as pe}from"./dateUtil.67c53eed.js";import{s as me,d as fe}from"./account.f146a620.js";import{P as ve}from"./Pagination.554cb32d.js";import{d as ge,p as he}from"./probeDetail.2a190bee.js";import{p as Fe}from"./privateMessages.b2cf9c4f.js";import{l as T}from"./lodash.a9e36c73.js";import{_ as be,d as Ce,g as I,r as v,E as H,j as d,v as Ae,o as i,b as B,w as _,a,k as n,c as p,y as Y,l as h,F as V,x as N,t as r,A as ye,q as ke,n as S,p as Ee,f as De}from"./index.5a90395c.js";import"./basic-info.d9e87cbd.js";import"./follow-records.bcccc358.js";import"./interact-records.4d1bfb99.js";const Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAwRJREFUSEuVVs1LVHEUPee9rEihFgaRGzdZBpEKRkpMmYhWlNCEiH1sWuQf0KqCEvoP3OQiqKQgSMGgD8P8LCfsSwlqtE2LlAp3GoLknHgzzryZ9zG/8W1meL977/ndc8+99xEFPPreWQ1YrYAiAMog7E66kQuA5gGOA/YA93R/NoVjPgPNdUYh3QawL9BOckAB5zd5AcRBXmdFT39Y3EBAfessBxKPANXlOjqBHZd1gMx/bxjGAKuDlXd+eIF9gJq7EsHaWh+kUhM9ec/JRdh2lBU949l2OYD6ejmChIYAFa3XKEWXQ5vz+ClMJZuJks4+/UKroNXE/XczoBnTJI1rK+8BlmZq4qXMF89TQx/Fzrm1CFu1rLyXpNcF/HJpEkJuzQotmYl7IsYDD+ozgJq5EIXwxOTnO/dl7NFUjgOjrOrtT2ao6fNxSHtdBYZ1izdl0xWzbkTEWfWwkppur0aCnwJF4dP0es+lReQ994nKY2+phvrYfgvQzRRgPkpM2WT5ZkTqbVt2UR/ahiE1BE8SXgMxUwCUa0KWA+qGZPlrzhFqKjoLoSIg6D9s3VbGg71/NgKomYvFWF35CWFHAGVz1LuzSwBKAoOSfwH9cs8K4TzZx9uDL2ktU5OtCp8kBpFsJPWU7RL19kx6Evu7wtT4hSSc24tz1JvTcqf/xq+c38MzGYgRauKUsvZZ7jCmfR9MTAF+wSWB1lQC6iqkncEayGq1pIHVRY21ZNXQ0zdbinbx8NPf+bLQWMtjgG0FAW4qqqFGm90a+htnHsRsOKCKARyC3CWQ53JxHhuspEaalFngvlHmocQkoqD1lH5nW+cYGeyjXjeGt4VplnpnZyggYmwcSq0nDR3PQ6lJ9979FEAosQhrcy0bXqYWsF4dddZyCPUGDo37kKuw2cTGYfcTQ4ORrAyNEQpvVOcjSnaUzS5YKsMXR1yNGRkscB8CMcju4IlR/2einteH96EvHwPFFuKAdYMtE31hVFDP6sJFk2+Dk8tAYgGy5gGMgxrgyZjxU/8/zttUnn7impkAAAAASUVORK5CYII=";let Ye=[{value:"1",label:"\u79C1\u4FE1\u4E92\u52A8"},{value:"2",label:"\u7EC4\u4EF6\u4E92\u52A8"},{value:"7",label:"\u8BC4\u8BBA\u4E92\u52A8"},{value:"9",label:"\u8868\u5355\u63D0\u4EA4"},{value:"15",label:"\u5C0F\u7A0B\u5E8F"},{value:"16",label:"\u8FD0\u8425\u63A8\u9001"}];function Ve(o){return{1:"\u79C1\u4FE1\u4E92\u52A8",2:"\u7EC4\u4EF6\u4E92\u52A8",3:"\u4E3B\u9875\u4E92\u52A8",4:"\u884C\u4E1A\u951A\u70B9\u4E92\u52A8",5:"\u76F4\u64AD\u4E92\u52A8",6:"\u89C6\u9891\u4E92\u52A8",7:"\u8BC4\u8BBA\u4E92\u52A8",8:"\u5927V\u8BC4\u8BBA\u4E92\u52A8",9:"\u8868\u5355\u63D0\u4EA4",10:"\u5728\u7EBF\u54A8\u8BE2",11:"\u667A\u80FD\u7535\u8BDD",12:"\u7F51\u9875\u56DE\u547C",13:"\u5361\u5238",14:"\u62BD\u5956",15:"\u5C0F\u7A0B\u5E8F",16:"\u8FD0\u8425\u63A8\u9001"}[o]}function ze(o){return{"-1":"\u6296\u97F3",0:"\u6296\u97F3",1:"\u5546\u4E1A\u6295\u653E",2:"\u5546\u4E1A\u6295\u653E",3:"\u5546\u4E1A\u6295\u653E",4:"\u5546\u4E1A\u6295\u653E",5:"\u5FEB\u624B",6:"\u5C0F\u7EA2\u4E66",7:"\u63A8\u9001"}[o]}const z=o=>(Ee("data-v-08653607"),o=o(),De(),o),Me={class:"customer_top"},Re={class:"customer_top_btns_box"},Se={class:"customer_top_btns"},we=["onClick"],xe={class:"customer_top_btns_right"},Ue=z(()=>a("span",null,"\u6211\u7684\u6536\u85CF",-1)),He={class:"customer_content"},je={class:"customer_content_list"},Pe={class:"customer_content_list_item_top"},qe={class:"customer_content_list_item_top_info"},Ke={class:"list_item_top_info"},We={class:"list_item_top_info_name"},Ge={class:"list_item_top_info_name_text"},Qe={class:"list_item_top_info_name_area"},Te={class:"list_item_top_info_tags"},Ie={key:1,class:"list_item_top_info_tags_item"},Ne={class:"customer_content_list_item_top_center"},Le=z(()=>a("div",{class:"list_item_top_center_tip"},[a("i",null,[a("img",{src:Be,alt:""})]),a("span",null,"\u4E92\u52A8\u8BB0\u5F55")],-1)),Oe={class:"list_item_top_center_content"},Xe={class:"customer_info_count"},Je={key:0,class:"customer_info_tip"},Ze={class:"customer_content_list_item_top_bottom"},$e={class:"list_item_top_bottom_li"},et=z(()=>a("span",null,"\u8054\u7CFB\u7535\u8BDD",-1)),tt={class:"list_item_top_bottom_li"},lt=z(()=>a("span",null,"\u5E73\u53F0/\u6765\u6E90\u8D26\u53F7",-1)),at={class:"list_item_top_bottom_li"},st=z(()=>a("span",null,"\u6765\u6E90\u7C7B\u578B",-1)),ot={class:"customer_content_list_item_bottom"},nt={class:"list_item_bottom_time"},ut={class:"list_item_bottom_btn"},it={class:"customer_content_pagination"},ct=Ce({__name:"customer",setup(o){const u=l=>`active_${l}`,e=I({}),M=v(de),A=v(0),y=v([]),k=v(),E=v([{value:"-1",label:"\u6296\u97F3"},{value:"1",label:"\u5546\u4E1A\u6295\u653E"},{value:"5",label:"\u5FEB\u624B"},{value:"6",label:"\u5C0F\u7EA2\u4E66"},{value:"7",label:"\u63A8\u9001"}]),m=v(["\u5168\u90E8","\u610F\u5411","\u7559\u8D44","\u5DF2\u6C9F\u901A","\u5DF2\u8DDF\u8FDB","\u5DF2\u5408\u4F5C"]),F=v(!1),L=l=>({0:"\u610F\u5411",1:"\u7559\u8D44",2:"\u5DF2\u6C9F\u901A",3:"\u5DF2\u8DDF\u8FDB",4:"\u5DF2\u5408\u4F5C"})[l],g=I({page:1,limit:15,total:0}),O=T.exports.debounce(l=>{A.value=l,l?e.leads_type=l-1:e.leads_type="",f()},300),f=()=>{let l={filter:{},op:{}};if(e.isfocus&&(l.filter.isfocus=1),e.nickname&&(l.filter["nickname|telephone|enterprise_nickname"]=e.nickname,l.op["nickname|telephone|enterprise_nickname"]="="),e.area&&M.value.forEach(s=>{s.value===e.area[0]&&(l.filter.city=s.label+"/"+s.children.find(b=>b.value===e.area[1]).label,l.op.city="=")}),e.source&&(l.filter.action_type=e.source,l.op.action_type="="),e.plate){switch(e.plate){case"-1":l.filter.data_type="-1, 1";break;case"1":l.filter.data_type="1, 2, 3, 4";break;default:l.filter.data_type=e.plate;break}l.op.data_type="in"}e.interact&&e.interact.length&&(l.filter.interact_time=e.interact[0]+" - "+e.interact[1],l.op.interact_time="range"),(e.leads_type||e.leads_type===0)&&(l.filter.leads_type=e.leads_type,l.op.leads_type="="),x(l)},X=l=>{g.page=l,x()},J=l=>{g.page=1,g.limit=l},Z=l=>{k.value.baseData.drawer=!0,k.value.baseData.customInfo=l},w=v(),j=v({}),$=l=>U(this,null,function*(){console.log(l),j.value=l,(l.data_type==-1||l.data_type==0)&&(w.value.dialogVisible=!0,w.value.accountType="customer")}),P=T.exports.debounce((l,s)=>U(this,null,function*(){let c=yield ee({id:l,isfocus:s});c.code==200?(H.success("\u6536\u85CF\u6210\u529F"),f()):H.success(c.msg)}),300),ee=l=>new Promise((s,b)=>{me(l).then(c=>{s(c)}).catch(c=>{console.log(c),b(c)})}),x=l=>{F.value=!0,fe(Q({page:g.page,limit:g.limit},l)).then(s=>{if(s.code==200)F.value=!1,y.value=s.data.list,g.total=s.data.count;else{if(s.msg=="\u65E0\u5BA2\u6237\u4FE1\u606F"){y.value=[];return}H.error(s.msg)}})};return x(),(l,s)=>{const b=d("el-input"),c=d("el-form-item"),te=d("el-cascader"),q=d("el-option"),K=d("el-select"),le=d("el-date-picker"),ae=d("el-form"),se=d("el-switch"),oe=d("el-avatar"),R=d("el-button"),ne=d("PageWrapper"),ue=Ae("loading");return i(),B(ne,{regain:"\u5BA2\u6237\u7BA1\u7406"},{default:_(()=>[a("div",Me,[n(ae,{model:e,ref:"form",inline:!0},{default:_(()=>[n(c,{label:""},{default:_(()=>[n(b,{modelValue:e.nickname,"onUpdate:modelValue":s[0]||(s[0]=t=>e.nickname=t),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0/\u7535\u8BDD/\u6765\u6E90\u8D26\u53F7",onChange:f},null,8,["modelValue"])]),_:1}),n(c,{label:""},{default:_(()=>[n(te,{modelValue:e.area,"onUpdate:modelValue":s[1]||(s[1]=t=>e.area=t),clearable:"",options:M.value,onChange:f},null,8,["modelValue","options"])]),_:1}),n(c,null,{default:_(()=>[n(K,{modelValue:e.source,"onUpdate:modelValue":s[2]||(s[2]=t=>e.source=t),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6765\u6E90",style:{width:"150px"},onChange:f},{default:_(()=>[(i(!0),p(V,null,Y(h(Ye),t=>(i(),B(q,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(c,null,{default:_(()=>[n(K,{modelValue:e.plate,"onUpdate:modelValue":s[3]||(s[3]=t=>e.plate=t),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5E73\u53F0",style:{width:"150px"},onChange:f},{default:_(()=>[(i(!0),p(V,null,Y(E.value,t=>(i(),B(q,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(c,null,{default:_(()=>[n(le,{modelValue:e.interact,"onUpdate:modelValue":s[4]||(s[4]=t=>e.interact=t),type:"datetimerange","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4",format:"YYYY-MM-DD HH:mm:ss","date-format":"YYYY/MM/DD ddd",size:"large","value-format":"YYYY-MM-DD HH:mm:ss",onChange:f},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a("div",Re,[a("div",Se,[(i(!0),p(V,null,Y(m.value,(t,D)=>(i(),p("div",{class:N(["customer_top_btns_item",{active:A.value==D}]),key:D,onClick:C=>h(O)(D)},r(t),11,we))),128))]),a("div",xe,[Ue,n(se,{modelValue:e.isfocus,"onUpdate:modelValue":s[5]||(s[5]=t=>e.isfocus=t),"active-value":!0,"inactive-value":!1,onChange:f},null,8,["modelValue"])])])]),a("div",He,[ye((i(),p("div",je,[(i(!0),p(V,null,Y(y.value,(t,D)=>(i(),p("div",{class:"customer_content_list_item mouseHover",key:D},[a("div",Pe,[a("div",qe,[n(oe,{icon:"el-icon-user-solid",size:56,shape:"circle",src:t.avatar||h(ge),fit:"fill"},null,8,["src"]),a("div",Ke,[a("div",We,[a("span",Ge,r(t.nickname),1),a("span",Qe,"(\u5730\u533A\uFF1A"+r(t.city?t.city:"\u672A\u77E5")+")",1)]),a("div",Te,[t.tag_list&&t.tag_list.length?(i(!0),p(V,{key:0},Y(t.tag_list.slice(0,3),(C,ie)=>(i(),p("div",{class:"list_item_top_info_tags_item",key:ie},r(C),1))),128)):(i(),p("div",Ie,"\u6682\u65E0\u6807\u7B7E"))])])]),a("div",Ne,[Le,a("div",Oe,[a("p",null,r(t.lastmessage||"\u6682\u65E0\u8BB0\u5F55"),1),a("span",Xe,"("+r(t.messagecount)+")",1),t.unreadnum?(i(),p("i",Je,r(t.unreadnum),1)):ke("",!0)])]),a("div",Ze,[a("div",$e,[et,a("p",null,r(t.telephone||"\u6682\u65E0"),1)]),a("div",tt,[lt,a("p",null,r(h(ze)(t.data_type)),1)]),a("div",at,[st,a("p",null,r(h(Ve)(t.action_type)),1)])])]),a("div",ot,[a("div",nt,r(h(pe)(t.update_time,"YYYY-MM-DD HH:mm:ss")),1),a("div",ut,[n(R,{type:"primary",size:"small",onClick:C=>Z(t)},{default:_(()=>[S("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["onClick"]),n(R,{size:"small",onClick:C=>$(t)},{default:_(()=>[S("\u79C1\u4FE1")]),_:2},1032,["onClick"]),t.isfocus?(i(),B(R,{key:0,size:"small",class:"activeFocus",onClick:C=>h(P)(t.id,0)},{default:_(()=>[S("\u5DF2\u6536\u85CF")]),_:2},1032,["onClick"])):(i(),B(R,{key:1,size:"small",onClick:C=>h(P)(t.id,1)},{default:_(()=>[S("\u6536\u85CF")]),_:2},1032,["onClick"]))])]),a("div",{class:N(["customer_content_list_item_type",u(t.leads_type)])},r(L(t.leads_type)),3)]))),128))])),[[ue,F.value]])]),a("div",it,[n(ve,{total:g.total,pages:g,pageSizes:[30,45,90],onHandleCurrentChange:X,onHandleSizeChange:J},null,8,["total","pages"])]),n(he,{ref_key:"probeDetailRef",ref:k,onSaveSuccess:f},null,512),n(Fe,{ref_key:"privateMessagesRef",ref:w,account:j.value},null,8,["account"])]),_:1})}}}),At=be(ct,[["__scopeId","data-v-08653607"]]);export{At as default};
