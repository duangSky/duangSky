var F=(_,h,s)=>new Promise((C,o)=>{var i=u=>{try{r(s.next(u))}catch(c){o(c)}},m=u=>{try{r(s.throw(u))}catch(c){o(c)}},r=u=>u.done?C(u.value):Promise.resolve(u.value).then(i,m);r((s=s.apply(_,h)).next())});import{d as B,h as y,r as k,j as D,o as A,c as P,k as l,w as p,a as n,t as b,l as I,x as T,_ as R,E as d,B as $}from"./index.5a90395c.js";import{o as M,q as V}from"./make.3dd199c4.js";import{c as j}from"./index.2523f7b1.js";import N from"./relat-plan-pop.76c3fc8f.js";import O from"./preview-pop.1062ec98.js";import"./Pagination.554cb32d.js";import"./publish.8b41f428.js";import"./index.101c175c.js";import"./imgText.df790733.js";import"./live-preview.6f60a1f0.js";import"./plat_xhs.a7d0325b.js";const q={class:"card"},z=["onClick"],S={class:"operate"},G=["onClick"],H=["onClick"],J=["onClick"],K=["onClick"],L=B({__name:"table-card",props:{tableData:{type:Array,defalut:[]},pages:{type:Object,default:{}}},emits:["renewImgText"],setup(_,{emit:h}){const s=h,C=y(),o=k(),i=k(),m=_,r=e=>{if(!e.plan_num)return d.warning("\u6682\u65E0\u5173\u8054\u53D1\u5E03\u8BA1\u5212");i.value.taskId=e.id,i.value.dialogVisible=!0},u=e=>{console.log(e),o.value.imgTextId=e.id,o.value.handleOpen()},c=e=>F(this,null,function*(){console.log(e);let{code:f,msg:t}=yield M({id:e.id});f==200?(d.success("\u590D\u5236\u6210\u529F"),s("renewImgText")):d.error(t)}),v=e=>{C.push(`/make/video/imgText/imgTextEdit?id=${e.id}`)},x=e=>{e.plan_num||$.alert("\u786E\u5B9A\u5220\u9664\u8BE5\u4EFB\u52A1\uFF1F","\u63D0\u793A",{type:"warning",showCancelButton:!0}).then(()=>F(this,null,function*(){let{code:f,msg:t}=yield V({id:e.id});f==200?(d.success("\u5220\u9664\u6210\u529F"),s("renewImgText")):d.error(t)})).catch(()=>{console.log("\u53D6\u6D88\u5220\u9664")})},E=e=>e+1+(m.pages.page-1)*m.pages.limit;return(e,f)=>{const t=D("el-table-column"),w=D("el-table");return A(),P("div",q,[l(w,{data:_.tableData},{default:p(()=>[l(t,{label:"\u5E8F\u53F7",width:"88"},{default:p(({$index:a})=>[n("span",null,b(E(a)),1)]),_:1}),l(t,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name"}),l(t,{label:"\u52A0\u5DE5\u6A21\u5F0F",width:"88"},{default:p(({row:a})=>[n("span",null,b(I(j)(a.process)),1)]),_:1}),l(t,{label:"\u8FB9\u6846/\u80CC\u666F\u6570\u91CF",prop:"process_material_num",width:"120"}),l(t,{label:"\u7D20\u6750\u6570\u91CF",prop:"material_num",width:"88"}),l(t,{label:"\u53EF\u53D1\u6570\u91CF",prop:"budget"}),l(t,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time"}),l(t,{label:"\u5DF2\u5173\u8054\u53D1\u5E03\u8BA1\u5212",width:"180"},{default:p(({row:a})=>[n("span",{class:"tiePlan",onClick:g=>r(a)},b(a.plan_num),9,z)]),_:1}),l(t,{label:"\u64CD\u4F5C",width:"200"},{default:p(({row:a})=>[n("div",S,[n("span",{onClick:g=>u(a)},"\u9884\u89C8",8,G),n("span",{onClick:g=>c(a)},"\u590D\u5236",8,H),n("span",{onClick:g=>v(a)},"\u7F16\u8F91",8,J),n("span",{class:T({disable:a.plan_num}),onClick:g=>x(a)},"\u5220\u9664",10,K)])]),_:1})]),_:1},8,["data"]),l(O,{ref_key:"previewRef",ref:o},null,512),l(N,{ref_key:"relatPlanRef",ref:i,pattern:"imgText"},null,512)])}}}),se=R(L,[["__scopeId","data-v-9f41d9de"]]);export{se as default};
