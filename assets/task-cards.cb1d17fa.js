import{d as j,r as p,j as o,o as n,b as m,w as i,k as a,c as f,y as S,a as s,q as T,t as c,l as h,x as L,A as M,J as z,n as R,F as U,_ as q,E as k}from"./index.5a90395c.js";import{n as J}from"./index.browser.2b0920b0.js";import{d as O}from"./downloadFile.9a38d16c.js";import{b as G,c as H,d as K}from"./index.458bd848.js";import{M as Q}from"./MediumPreview.37c6af48.js";import W from"./video-preview.bc5a5dfa.js";const X={class:"img mask"},Y=["src"],Z=["onClick"],ee={class:"tags"},se={class:"t_item"},te={class:"text-ellipsis-1"},oe={class:"t_item"},ae={class:"text-ellipsis-1"},le={class:"txt"},ne={class:"title text-ellipsis-1"},ie={key:1,class:"title text-ellipsis-1"},ce={class:"size"},re={class:"foot"},de={class:"operate"},_e=["onClick"],ue=j({__name:"task-cards",props:{tasks:{type:Array,default:[]}},emits:["setIsAll","setChecked"],setup(d,{expose:g,emit:C}){const _=p([]),u=p(),r=p(),v=C,x=d,y=(t,l)=>{if(t.status==2){if(!t.media_url)return k.warning("\u6682\u65E0\u89C6\u9891");u.value.index=l,u.value.handleOpen()}else t.status==1?k.warning("\u89C6\u9891\u5408\u6210\u4E2D\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"):(r.value.taskId=t.id,r.value.ratio=t.ratio.replace(":","/"),r.value.show=!0)},V=t=>{if(console.log(t,t.media_url),!t.media_url)return k.warning("\u6682\u65E0\u89C6\u9891");O({url:t.media_url,title:J(6),type:"video"})},E=t=>{const l=t.length===x.tasks.length;v("setIsAll",l),v("setChecked",t)};return g({checkedTasks:_}),(t,l)=>{const F=o("VideoPlay"),w=o("el-icon"),D=o("el-checkbox"),b=o("el-tooltip"),A=o("Download"),B=o("el-col"),P=o("el-row"),I=o("el-checkbox-group");return n(),m(I,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),onChange:E},{default:i(()=>[a(P,null,{default:i(()=>[(n(!0),f(U,null,S(d.tasks,(e,$)=>(n(),m(B,{style:{padding:"0 10px"},span:4,key:e.id},{default:i(()=>[s("div",X,[s("img",{src:e.cover_url,alt:""},null,8,Y),e.status!==3?(n(),f("div",{key:0,class:"play",onClick:N=>y(e,$)},[a(w,null,{default:i(()=>[a(F)]),_:1})],8,Z)):T("",!0),s("div",ee,[s("div",se,[s("span",te,c(h(G)(e.score)),1)]),s("div",oe,[s("span",ae,"\u76F8\u4F3C\u5EA6\uFF1A"+c(100-e.order)+"%",1)])]),a(D,{label:e.id},null,8,["label"])]),s("div",le,[e.project_name?(n(),m(b,{key:0,effect:"light","show-arrow":!1,"show-after":1e3,offset:0,content:e.project_name},{default:i(()=>[s("div",ne,c(e.project_name),1)]),_:2},1032,["content"])):(n(),f("div",ie,"\u65E0")),s("div",ce,[s("span",null,c(`${e.width}*${e.height} / ${e.status==2?"":"\u2248"}${e.video_time}s`),1)]),s("div",re,[s("div",{class:L(["type",h(H)(e.status)])},c(h(K)(e.status)),3),s("div",de,[M(s("span",{onClick:N=>V(e)},[a(w,null,{default:i(()=>[a(A)]),_:1}),R(" \u4E0B\u8F7D")],8,_e),[[z,e.status===2]])])])])]),_:2},1024))),128))]),_:1}),a(Q,{ref_key:"VIPreview",ref:u,files:d.tasks},null,8,["files"]),a(W,{ref_key:"previewRef",ref:r},null,512)]),_:1},8,["modelValue"])}}}),we=q(ue,[["__scopeId","data-v-30f0468c"]]);export{we as default};
