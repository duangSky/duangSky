var me=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var le=(s,m,o)=>m in s?me(s,m,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[m]=o,te=(s,m)=>{for(var o in m||(m={}))_e.call(m,o)&&le(s,o,m[o]);if(ae)for(var o of ae(m))Ae.call(m,o)&&le(s,o,m[o]);return s};var O=(s,m,o)=>new Promise((B,e)=>{var C=a=>{try{_(o.next(a))}catch(u){e(u)}},k=a=>{try{_(o.throw(a))}catch(u){e(u)}},_=a=>a.done?B(a.value):Promise.resolve(a.value).then(C,k);_((o=o.apply(s,m)).next())});import{d as H,r as f,a0 as P,j as i,o as n,b as V,w as h,k as p,c as w,y as G,a as l,A as $,J as ve,z as fe,n as W,q,t as M,F as L,_ as ee,U as he,v as ue,l as F,E as K,p as se,f as ne,T as J,x as ge,ad as ye}from"./index.5a90395c.js";import{u as de}from"./publish.6bf25757.js";import{u as Fe}from"./material.85a80f57.js";import Ve from"./video-card.e6197b15.js";import{r as Ce,t as ke}from"./index.458bd848.js";import{P as be}from"./Pagination.554cb32d.js";import{y as xe,b as De}from"./make.3dd199c4.js";import{I as Me}from"./ImportMeterial.9b103172.js";import Se from"./mix-task-pop.1863c078.js";import{r as Ee,p as oe}from"./index.101c175c.js";import{e as we}from"./dateUtil.67c53eed.js";import{E as Be}from"./empty.ab2a3794.js";import"./creative.ea528d59.js";import"./keyword.011c6f30.js";import"./MediumPreview.37c6af48.js";import"./edit-cover.ee5c4644.js";import"./base64Conver.96a5c530.js";import"./combo-pop.539db6c6.js";import"./vuedraggable.umd.dc61d486.js";import"./index.0e306189.js";import"./index.browser.2b0920b0.js";import"./AliCloudUpload.13488d40.js";import"./audio.531569af.js";import"./mixShear.0f781a9f.js";import"./live-preview.59156950.js";import"./plat_xhs.a7d0325b.js";import"./index.ae708507.js";const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAgCAYAAAAFQMh/AAAAAXNSR0IArs4c6QAAAnRJREFUWEfNl82LzWEUxz/f8TIMC9MsRMrGgshLMhsLkrz8A3ZSFspLLIgFSy+L2clKUTYmKxaKJLFlQV6yoGzUJIpkTLgcv+/03Ok31+/Oveb+fjNzdvf39JzPec55zvc5V0yTaZq4zBxwRDiYTUA/sKTDjAwBj4EnkiLva9yJI2IZcA3Y1iGwcfsDYJ+k9/WFMXBEzAeeAyuAz8B94ANwBHC0F3PevO9o+u3v+dP4u9cvAYuB7UAv8BZYK2nE+/Lgs8Bp4AWwU9JQRMwFfgA1SXPyx4iIUZikxqz9AmYD3ZJ+RoTLdQ9YA5yTdKYR/BRYD2yV9MiLZYCTny2Z34fAM0kbxsAR4Qi/A11AjyMtGezM2f+f5L82mqaIWAB8AwzcnUup03sX+A3saKix74DNNczX2GmdBezKSue01+0O4AAWShpuBJd8mQvdFYId+auK6KvTZS4Ej0jqqQIcEa6xW3Zy4IhY6ZpLevM/AXYEjgj3ufvddgs45H5vJ4BOwZ+AviQq3cAX4Likq63gkwZHhFukllpnFXAF2JyAbq0Dkt41C6AUsKSu9IodzqTxgi8MMAzslXSzCF4auO48IpYDl5PAWIR6Mz12ZsZZFWCX4ESmSudTGRZJcgDVgSNiXar1xkQZkHSyslQnIfDzdip76qznH7M3/JikwSoul3Xd6jMPeA34ZtuuJ6hbrak1q3Hhs1hQpxvAnvTdY8xBSbfb6OHiZ9EbI+KfQaAAbK3dn/p5UNLXVtDku3gQSIv10eelW6NdKWwFbmf0yQ97lkI/6G3p8ATwpS2HvXTqqR9vc0o09QN9q3qVuT5z/juVeaqJfP0F4+CCMCyTqpMAAAAASUVORK5CYII=",Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAgCAYAAAAFQMh/AAAAAXNSR0IArs4c6QAAAxdJREFUWEfNl7trFFEUxr8zu7PuRhMUC4ksSMBCifhAlBAhOmH3jv4DdiJYCD7QQtHClD4KO7ESFGwMVloIOneSHU2RQgtFDRYKplgIYkAxG43O7nxyw27YxE02mgnxdnMv9/zO+54RrNCSFeLi/wGTlEKhsCeKor0k25fiEREZsyzreW9v7wsRYb2sWRYHQZANw/Auyd6lAOfeFZGCbdtHHccp1s5mwMPDw5mJiYnXADYD+CIiAwA+kTxd1fZGnUAhecZ8i4jZr7fmjPGaiNwEsIFkDsA6AB9aW1u3d3d3/5i+VxPmed5lAJdE5E06nXZ7enrGRkZGUsVi8aeIlJVSdr0lnudNw1zXneU1rXVIMpnNZld1dnb+Ghoaap+amtIktwG44rpu3yyw1volyZ0ickAp9cwcxgE2crTW+0k+FZFXSqldM+AgCJJhGH4naWWz2RajaZzgqgHfRSSybbvFcZzytJs8z1sNoATAAA/VXGpZlh1F0RMAFQBqJjFM0EmTAybGOZL1MdYAEpZlHYyiKKwLz2MAKQBrXNednAuOM5nnk/UnuJq9I8tE7zTZ3tBiEfmhlGpZDrDW2uRQ5p/BQRBsCcOwopR6/zcKLgns+/6lKIpMvZv1MJPJnDT1vhgFlgTWWo+TXA/gJ4BVIvJVRM7l8/k7zeD/DCaZ0FqXTQImk8mt5XL5Nsl9VaApreOu636cT4FYwEopy2TowMDAKZLXSK4RkUkAR5RSDxrBYwPXhA8ODm6qVCq3SCoRKdm2vc50prnw2MEmBL7vnyd51bxSqVRqreM4pgvOWrGCC4XCjjAMbwPYbSiWZV3P5/MXls3VHR0dmdHR0T6SF0ma5/KziJxVSvUvR3KJ7/um+6RF5B3JrVXIvVQqddZxnPGFSqqhq+d7FhvE6T7Jw9X9YiKROJHL5R41q+F5n0VzsdEgMFegGY9KpdIxAOW2trb+rq6ub82gVdmNBwFzWDf6vE2n02qxrbAZuOnoUz/smVZonABgUX14AfjGpsOeubwi421N6xUZ6JvFK87z/+ffKU6rFpL1G3DDcj/fFaolAAAAAElFTkSuQmCC";const ze=["onClick"],Ze=["src"],Te={class:"txt"},Ue={class:"title"},Ye={class:"text-ellipsis-1"},Je={class:"size"},qe={class:"use"},Ke=H({__name:"recent-card",props:{cards:{type:Array,default:[]}},setup(s,{expose:m}){const o=f([]),B=de(),{form:e}=P(B),C=a=>{k(a)?o.value=o.value.filter(u=>u.id!==a.id):o.value.push(a)},k=a=>o.value.some(u=>u.id===a.id),_=a=>e.value.data.Video.some(u=>u.id===a.id);return m({selectVideos:o}),(a,u)=>{const b=i("el-checkbox"),I=i("el-tag"),U=i("el-col"),x=i("el-row"),j=i("el-scrollbar");return n(),V(j,null,{default:h(()=>[p(x,null,{default:h(()=>[(n(!0),w(L,null,G(s.cards,g=>(n(),V(U,{span:6,key:g.id},{default:h(()=>[l("div",{class:"img",onClick:X=>C(g)},[l("img",{src:g.cover_url,alt:""},null,8,Ze),$(p(b,{checked:!0,label:g.id,size:"large"},null,8,["label"]),[[ve,k(g)]]),l("div",{class:"tag",onClick:u[0]||(u[0]=fe(()=>{},["stop"]))},[_(g)?(n(),V(I,{key:0,effect:"plain"},{default:h(()=>[W("\u5DF2\u6DFB\u52A0")]),_:1})):q("",!0)])],8,ze),l("div",Te,[l("div",Ue,[l("span",Ye,M(g.project_name||"\u65E0"),1)]),l("div",Je,M(g.width)+"*"+M(g.height)+" / "+M(g.duration)+"s",1),l("div",qe,[W("\u4F7F\u7528\u6B21\u6570 "),l("span",null,M(g.use_number||0),1)])])]),_:2},1024))),128))]),_:1})]),_:1})}}}),je=ee(Ke,[["__scopeId","data-v-3ca15d9d"]]);const ie=s=>(se("data-v-3cbd713b"),s=s(),ne(),s),Xe={class:"content"},Ne={class:"query"},Ge={class:"select"},Le={class:"count"},Qe={class:"choose"},Oe=ie(()=>l("span",null,"\u5DF2\u9009",-1)),Pe={class:"num"},We=ie(()=>l("span",{class:"clear"},"\u6E05\u7A7A\u5168\u90E8",-1)),He={class:"foot"},$e=H({__name:"VideoLibrary",emits:["handleAddVideo"],setup(s,{expose:m,emit:o}){const B=o,e=f(!1),C=f(!1),k=f(!1),_=f(),a=f({project_name:"",ratio:"",type:"",update_time:""}),u=f({page:1,limit:16}),b=f([]),I=f(0),U=()=>{x()},x=()=>O(this,null,function*(){let r={},d={};a.value.project_name&&(r.project_name=a.value.project_name,d.project_name="like"),a.value.ratio&&(r.ratio=a.value.ratio,d.ratio="="),a.value.type&&(r.type=a.value.type,d.type="="),a.value.update_time&&(r.update_time=`${a.value.update_time[0]} 00:00:00 - ${a.value.update_time[1]} 23:59:59`,d.update_time="range");let Y=te({filter:r,op:d},u.value);k.value=!0;let{code:z,data:R,msg:Z}=yield xe(Y);z==200?(b.value=R.list,I.value=R.total):K.error(Z),k.value=!1}),j=r=>{r?_.value.selectVideos=b.value:_.value.selectVideos=[]},g=r=>{u.value.page=r,x()},X=r=>{u.value.page=1,u.value.limit=r,x()},Q=()=>{if(!_.value.selectVideos.length)return K.error("\u8BF7\u5148\u9009\u62E9\u89C6\u9891");B("handleAddVideo",_.value.selectVideos),e.value=!1},N=()=>{_.value.selectVideos=[]};return he(()=>{var r;return(r=_.value)==null?void 0:r.selectVideos},r=>{b.value.length&&r.length===b.value.length?C.value=!0:C.value=!1},{deep:!0}),m({drawer:e}),(r,d)=>{const Y=i("Search"),z=i("el-icon"),R=i("el-input"),Z=i("el-option"),t=i("el-select"),A=i("el-date-picker"),D=i("el-checkbox"),S=i("el-button"),v=i("el-drawer"),y=ue("loading");return n(),V(v,{modelValue:e.value,"onUpdate:modelValue":d[5]||(d[5]=T=>e.value=T),title:"\u6DFB\u52A0\u89C6\u9891",size:"1000",onOpen:U,onClose:N},{default:h(()=>{var T;return[l("div",Xe,[l("div",Ne,[p(R,{modelValue:a.value.project_name,"onUpdate:modelValue":d[0]||(d[0]=c=>a.value.project_name=c),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u521B\u4F5C\u4EFB\u52A1\u540D\u79F0"},{suffix:h(()=>[p(z,{class:"search"},{default:h(()=>[p(Y)]),_:1})]),_:1},8,["modelValue"]),p(t,{modelValue:a.value.ratio,"onUpdate:modelValue":d[1]||(d[1]=c=>a.value.ratio=c),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u89C6\u9891\u6BD4\u4F8B"},{default:h(()=>[(n(!0),w(L,null,G(F(Ce),c=>(n(),V(Z,{key:c.value,value:c.value,label:c.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),p(t,{modelValue:a.value.type,"onUpdate:modelValue":d[2]||(d[2]=c=>a.value.type=c),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u6A21\u5F0F"},{default:h(()=>[(n(!0),w(L,null,G(F(ke),c=>(n(),V(Z,{key:c.value,value:c.value,label:c.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),p(A,{modelValue:a.value.update_time,"onUpdate:modelValue":d[3]||(d[3]=c=>a.value.update_time=c),type:"daterange",clearable:"",size:"large","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),l("div",Ge,[l("div",Le,[p(D,{modelValue:C.value,"onUpdate:modelValue":d[4]||(d[4]=c=>C.value=c),label:"\u5168\u9009",onChange:j},null,8,["modelValue"]),l("div",Qe,[Oe,l("span",Pe,M((T=_.value)==null?void 0:T.selectVideos.length)+"\u4E2A",1)]),We]),p(S,{type:"primary",onClick:Q},{default:h(()=>[W("\u6DFB\u52A0\u89C6\u9891")]),_:1})]),$(p(je,{ref_key:"cardRef",ref:_,cards:b.value},null,8,["cards"]),[[y,k.value]]),l("div",He,[p(be,{pages:u.value,total:I.value,pageSizes:[16,32,64,128],onHandleCurrentChange:g,onHandleSizeChange:X},null,8,["pages","total"])])])]}),_:1},8,["modelValue"])}}}),ea=ee($e,[["__scopeId","data-v-3cbd713b"]]);const re=s=>(se("data-v-677448da"),s=s(),ne(),s),aa={class:"addVideo"},la={class:"btns"},ta=["onClick"],oa=["src"],ua=re(()=>l("span",null,"\u67E5\u770B\u4EFB\u52A1",-1)),sa={class:"accounts"},na={class:"head"},da={class:"count"},ia=re(()=>l("span",null,"\u5DF2\u6DFB\u52A0\u89C6\u9891\u6570\u91CF\uFF1A",-1)),ra={class:"num"},ca=H({__name:"add-video",setup(s,{expose:m}){const o=de(),B=Fe(),{form:e}=P(o),{selectMaterals:C,screen:k}=P(B),_=f(),a=f(),u=f(),b=f(),I=f([]),U=f(0),x=f(!1);(()=>O(this,null,function*(){x.value=!0;let{code:t,data:A,msg:D}=yield De({page:1,limit:999});t==200?(I.value=A.list,U.value=A.total):K.error(D),x.value=!1}))();const g=t=>{t.name==="AI\u6DF7\u526A"?(e.value.data.isMixShear=!0,e.value.data.Video=[]):(e.value.data.isMixShear=!1,e.value.data.CycleMixcutId=null),{\u7D20\u6750\u5E93:()=>{C.value=e.value.data.Video,k.value.type="video",k.value.uploadedData=["video"],a.value.drawer=!0},\u89C6\u9891\u5E93:()=>{_.value.drawer=!0},2:()=>console.log("??"),AI\u6DF7\u526A:()=>console.log("??")}[t.name]()},X=t=>{let A=t.map(v=>oe(v)).map(v=>(v.type="video",v)),D=[...e.value.data.Video,...A],S={};e.value.data.Video=D.reduce((v,y)=>(S[y.id]||(S[y.id]=v.push(y)),v),[]),N()},Q=t=>{if(!t)return;let A=C.value.map(v=>oe(v)),D=[...e.value.data.Video,...A],S={};e.value.data.Video=D.reduce((v,y)=>(S[y.id]||(S[y.id]=v.push(y)),v),[]),N()},N=()=>{e.value.data.Video.length>200?(K.warning("\u6700\u591A\u53EF\u6DFB\u52A0200\u4E2A\uFF01"),e.value.data.Video=e.value.data.Video.slice(0,200)):K.success("\u89C6\u9891\u6DFB\u52A0\u6210\u529F")},r=()=>{u.value.mixId=e.value.data.CycleMixcutId,u.value.drawer=!0},d=J(()=>{let t=[{name:"\u89C6\u9891\u5E93",icon:"Plus"},{name:"\u7D20\u6750\u5E93",icon:"Plus"}];return e.value.type==="cycle"?t.push({name:"AI\u6DF7\u526A",img:e.value.data.isMixShear?Ie:Re}):t=t.filter(A=>A.name!=="AI\u6DF7\u526A"),t}),Y=J(()=>{let t=!1;return t=e.value.data.CyclePublishNum&&e.value.data.Account.length&&R.value&&e.value.data.CycleMixcutId,t}),z=J(()=>{let t=0;return t=e.value.data.CyclePublishNum*e.value.data.Account.length,t}),R=J(()=>{var A;let t=0;return(A=e.value.data.CycleDate)!=null&&A.length&&(t=we(e.value.data.CycleDate[0],e.value.data.CycleDate[1])+1),t}),Z=J(()=>z.value*R.value);return m({formRef:b}),(t,A)=>{const D=i("el-icon"),S=i("el-select-v2"),v=i("DArrowRight"),y=i("el-form-item"),T=i("el-empty"),c=i("el-form"),ce=ue("loading");return n(),w("div",aa,[l("div",la,[(n(!0),w(L,null,G(d.value,(E,pe)=>(n(),w("div",{class:ge(["btnItem",{isMixShear:E.name==="AI\u6DF7\u526A"&&F(e).data.isMixShear}]),key:pe,onClick:pa=>g(E)},[E.icon?(n(),V(D,{key:0},{default:h(()=>[(n(),V(ye(E.icon)))]),_:2},1024)):(n(),w("img",{key:1,src:E.img,alt:""},null,8,oa)),l("span",null,M(E.name),1)],10,ta))),128))]),p(c,{class:"mixShear",ref_key:"formRef",ref:b,model:F(e),rules:F(Ee)},{default:h(()=>[F(e).data.isMixShear?(n(),V(y,{key:0,label:"\u9009\u62E9\u4EFB\u52A1",prop:"data.CycleMixcutId"},{default:h(()=>[$(p(S,{modelValue:F(e).data.CycleMixcutId,"onUpdate:modelValue":A[0]||(A[0]=E=>F(e).data.CycleMixcutId=E),disabled:x.value,options:I.value,height:360,props:{value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u6DF7\u526A\u4EFB\u52A1"},null,8,["modelValue","disabled","options"]),[[ce,x.value]]),F(e).data.CycleMixcutId?(n(),w("div",{key:0,class:"check",onClick:r},[ua,p(D,null,{default:h(()=>[p(v)]),_:1})])):q("",!0)]),_:1})):q("",!0),Y.value?(n(),V(y,{key:1,class:"formTips"},{default:h(()=>[l("span",null,"\u6BCF\u65E5\u6D88\u8017 "+M(z.value)+"/\u6761 \u603B\u8BA1\u6D88\u8017 "+M(Z.value)+"/\u6761",1)]),_:1})):q("",!0),F(e).data.isMixShear?q("",!0):(n(),V(y,{key:2,prop:"data.Video"},{default:h(()=>[l("div",sa,[l("div",na,[l("div",da,[ia,l("span",ra,M(F(e).data.Video.length)+"/200",1)])]),F(e).data.Video.length?(n(),V(Ve,{key:0})):(n(),V(T,{key:1,image:F(Be),description:"\u6682\u65E0\u6570\u636E"},null,8,["image"]))])]),_:1}))]),_:1},8,["model","rules"]),p(ea,{ref_key:"addVideoRef",ref:_,onHandleAddVideo:X},null,512),p(Me,{ref_key:"meterialRef",ref:a,onCloseDrawer:Q},null,512),p(Se,{ref_key:"mixTaskRef",ref:u},null,512)])}}}),qa=ee(ca,[["__scopeId","data-v-677448da"]]);export{qa as default};
