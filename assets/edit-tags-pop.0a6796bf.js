var q=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var x=(t,o,e)=>o in t?q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,z=(t,o)=>{for(var e in o||(o={}))J.call(o,e)&&x(t,e,o[e]);if(M)for(var e of M(o))K.call(o,e)&&x(t,e,o[e]);return t},U=(t,o)=>G(t,H(o));var y=(t,o,e)=>new Promise((g,v)=>{var E=u=>{try{f(e.next(u))}catch(c){v(c)}},V=u=>{try{f(e.throw(u))}catch(c){v(c)}},f=u=>u.done?g(u.value):Promise.resolve(u.value).then(E,V);f((e=e.apply(t,o)).next())});import{d as Q,a0 as W,r as F,j as p,o as _,b,w as r,k as i,n as I,l as B,c as N,y as R,F as S,E as k}from"./index.5a90395c.js";import{u as X}from"./material.85a80f57.js";import{p as Y,j as ee}from"./creative.ea528d59.js";import{Z as le}from"./config.d0c812d6.js";import"./keyword.011c6f30.js";const re=Q({__name:"edit-tags-pop",props:{isBatch:{type:Boolean,default:!1}},setup(t,{expose:o}){const e=X(),{system_tags:g,keywords:v,checklist:E}=W(e),{getlistMedia:V,setBulk:f}=e,u=F(!1),c=F("\u7F16\u8F91\u6807\u7B7E"),h=F(""),s=F({tags_zhuci:[],tags_miaoshu:[],tags_jingtou:[]}),C=t,T=(n,l)=>{let m=l.map(d=>d[1]);s.value[n]=m},Z=()=>y(this,null,function*(){let{code:n,data:l,msg:m}=yield ee({id:h.value});if(n==200)for(let d in s.value)s.value[d]=l[d];else k.error(m)}),A=()=>{C.isBatch?c.value="\u6807\u7B7E\u7F16\u8F91\uFF08\u6279\u91CF\uFF09":Z()},L=()=>y(this,null,function*(){let n=U(z({},s.value),{filter:{},op:{}});C.isBatch?(n.filter.id=E.value,n.op.id="in"):n.id=h.value;let{code:l,msg:m}=yield Y(n);l==200?(k.success("\u4FEE\u6539\u6210\u529F"),u.value=!1,V(),f(!1)):k.error(m)}),O=()=>{for(let n in s.value)s.value[n]=[]};return o({dialogVisible:u,mediaId:h}),(n,l)=>{const m=p("el-cascader"),d=p("el-form-item"),w=p("el-option"),j=p("el-select"),P=p("el-form"),D=p("el-button"),$=p("el-dialog");return _(),b($,{modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value=a),draggable:"","destroy-on-close":"",title:c.value,width:"540",onOpen:A,onClosed:O},{footer:r(()=>[i(D,{onClick:l[4]||(l[4]=a=>u.value=!1)},{default:r(()=>[I("\u53D6\u6D88")]),_:1}),i(D,{type:"primary",onClick:L},{default:r(()=>[I("\u786E\u5B9A")]),_:1})]),default:r(()=>[i(P,{ref:"ruleFormRef",model:s.value},{default:r(()=>[i(d,null,{default:r(()=>[i(m,{modelValue:s.value.tags_zhuci,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value.tags_zhuci=a),style:{width:"100%"},options:B(v),props:B(le),"show-all-levels":!1,placeholder:"\u8BF7\u9009\u62E9\u5173\u952E\u8BCD\u6807\u7B7E",clearable:"",onChange:l[1]||(l[1]=a=>T("tags_zhuci",a))},null,8,["modelValue","options","props"])]),_:1}),i(d,null,{default:r(()=>[i(j,{modelValue:s.value.tags_miaoshu,"onUpdate:modelValue":l[2]||(l[2]=a=>s.value.tags_miaoshu=a),style:{width:"100%"},multiple:"",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7D20\u6750\u63CF\u8FF0\u6807\u7B7E"},{default:r(()=>[(_(!0),N(S,null,R(B(g).miaoshu,a=>(_(),b(w,{key:a.name,label:a.name,value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(d,null,{default:r(()=>[i(j,{modelValue:s.value.tags_jingtou,"onUpdate:modelValue":l[3]||(l[3]=a=>s.value.tags_jingtou=a),style:{width:"100%"},multiple:"",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u955C\u5934\u6807\u7B7E"},{default:r(()=>[(_(!0),N(S,null,R(B(g).jingtou,a=>(_(),b(w,{key:a.name,label:a.name,value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{re as default};
