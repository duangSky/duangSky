var E=(r,C,t)=>new Promise((c,l)=>{var F=s=>{try{d(t.next(s))}catch(n){l(n)}},a=s=>{try{d(t.throw(s))}catch(n){l(n)}},d=s=>s.done?c(s.value):Promise.resolve(s.value).then(F,a);d((t=t.apply(r,C)).next())});import{d as D,r as h,P as I,g as L,u as R,h as N,i as U,j as i,o as P,b as j,w as o,k as e,l as S,m as q,a as g,n as V,R as z,E as y,_ as O,p as A,f as K}from"./index.5a90395c.js";import{P as M,L as G}from"./PersonOutline.ce39648a.js";const T=r=>(A("data-v-36edb7f0"),r=r(),K(),r),H={class:"flex items-center justify-between forget"},J={class:"flex-initial"},Q=T(()=>g("div",{class:"flex-initial order-last"},[g("a",{href:"javascript:"},"\u5FD8\u8BB0\u5BC6\u7801")],-1)),W=D({__name:"LoginForm2",emits:["goRegister"],setup(r,{emit:C}){const t=h(),c=h(!1),l=h(!0),F=I.BASE_LOGIN_NAME,a=L({username:"admin",password:"xinyingjishu@2023"}),d={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}},s=R(),n=N(),x=U(),b=()=>{!t.value||t.value.validate(k=>E(this,null,function*(){var u;if(k){const{username:m,password:f}=a;c.value=!0;const _={username:m,password:f,keep_login:l.value?"on":""};try{const{code:B,message:v}=yield s.login(_);if(B==z.SUCCESS){const w=decodeURIComponent(((u=x.query)==null?void 0:u.redirect)||"/");y.success("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8FDB\u5165\u7CFB\u7EDF"),x.name===F?n.replace("/"):n.replace(w)}else y.error(v||"\u767B\u5F55\u5931\u8D25")}finally{c.value=!1}}else y({message:"\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F",type:"error"})}))};return(k,u)=>{const m=i("el-icon"),f=i("el-input"),_=i("el-form-item"),B=i("el-checkbox"),v=i("el-button"),w=i("el-form");return P(),j(w,{ref_key:"formRef",ref:t,"show-label":!1,"show-require-mark":!1,size:"large",model:a,rules:d,class:"login-form"},{default:o(()=>[e(_,{prop:"username"},{default:o(()=>[e(f,{modelValue:a.username,"onUpdate:modelValue":u[0]||(u[0]=p=>a.username=p),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prefix:o(()=>[e(m,{class:"el-input__icon",size:"18",color:"#808695"},{default:o(()=>[e(S(M))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{prop:"password"},{default:o(()=>[e(f,{modelValue:a.password,"onUpdate:modelValue":u[1]||(u[1]=p=>a.password=p),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeyup:q(b,["enter"])},{prefix:o(()=>[e(m,{class:"el-input__icon",size:"18",color:"#808695"},{default:o(()=>[e(S(G))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),g("div",H,[g("div",J,[e(B,{checked:l.value,"onUpdate:checked":u[2]||(u[2]=p=>l.value=p)},{default:o(()=>[V("\u4FDD\u6301\u767B\u5F55")]),_:1},8,["checked"])]),Q]),e(_,{"show-label":!1},{default:o(()=>[e(v,{class:"w-full",type:"primary",onClick:b,size:"large",loading:c.value,round:""},{default:o(()=>[V(" \u767B\u5F55 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}}),$=O(W,[["__scopeId","data-v-36edb7f0"]]);export{$ as default};
