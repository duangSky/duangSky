var y=(d,h,m)=>new Promise((n,_)=>{var c=u=>{try{e(m.next(u))}catch(f){_(f)}},F=u=>{try{e(m.throw(u))}catch(f){_(f)}},e=u=>u.done?n(u.value):Promise.resolve(u.value).then(c,F);e((m=m.apply(d,h)).next())});import{d as H,r as i,T as $,j as v,v as j,A as V,o as B,b as D,w as s,k as r,c as q,y as M,F as G,n as I,J as K,q as O,a as g,t as k,l as P,_ as Q,E as b,p as W,f as X}from"./index.5a90395c.js";import{c as Y}from"./index.browser.2b0920b0.js";import{r as Z,m as ee}from"./config.a0a543ec.js";import ue from"./sample-list.9702bac1.js";import{k as le,m as ae,n as te}from"./aitools.ae73576d.js";import"./ali-cound-upload.18354a64.js";const oe=d=>(W("data-v-117f301b"),d=d(),X(),d),se=oe(()=>g("div",{class:"title text-ellipsis-1"},[g("span",null,"\u6717\u8BFB\u8303\u6587\u53CA\u97F3\u9891"),g("span",{class:"tips"},"\uFF08\u6839\u636E\u63D0\u793A\u5F55\u523620\u6BB5\u97F3\u9891\u8FDB\u884C\u4E0A\u4F20\u63D0\u53D6\u58F0\u97F3\uFF09")],-1)),re={class:"btn"},ne=H({__name:"sound-set",emits:["refreshHistory"],setup(d,{emit:h}){const m=Y(ee),n=i(""),_=i(),c=i(!1),F=i(!1),e=i({name:"",describe:"",sex:"male"}),u=i([]),f=i([{label:"\u7537",value:"male"},{label:"\u5973",value:"female"}]),w=h;(()=>y(this,null,function*(){let{code:l,data:a,msg:p}=yield le({scenario:"story"});l==200?u.value=a.DemonstrationList.map((t,x)=>(t.Text=`${x+1}\u3001${t.Text}`,t)):b.error(p)}))();const A=()=>y(this,null,function*(){try{yield _.value.validate(),n.value=m();let{code:l,msg:a}=yield ae({voiceId:n.value,voiceName:e.value.name,voiceDesc:e.value.describe,gender:e.value.sex,scenario:"story"});l==200?(b.success("\u514B\u9686\u4EFB\u52A1\u521B\u5EFA\u6210\u529F"),c.value=!0):(b.error(a),c.value=!1)}catch(l){console.log(l)}}),S=()=>{F.value=!0},N=()=>{F.value=!1},U=({item:l,url:a})=>{const p=u.value.find(t=>t.AudioId===l.AudioId);p.url=a},E=$(()=>u.value.filter(l=>l.url).length),T=()=>{e.value.name="",e.value.describe="",u.value.forEach(l=>l.url=""),n.value="",c.value=!1},z=()=>y(this,null,function*(){if(E.value!==u.value.length){b.warning("\u5F53\u524D\u4E0A\u4F20\u97F3\u9891\u6587\u4EF6\u6570\u91CF\u4E0D\u8DB3\u65E0\u6CD5\u751F\u6210\u514B\u9686\u58F0\u97F3");return}let{code:l,msg:a}=yield te({voiceId:n.value});l==200?(console.log("\u6210\u529F"),w("refreshHistory"),T()):b.error(a)});return(l,a)=>{const p=v("el-input"),t=v("el-form-item"),x=v("el-option"),J=v("el-select"),C=v("el-button"),L=v("el-form"),R=j("loading");return V((B(),D(L,{ref_key:"ruleFormRef",ref:_,model:e.value,rules:P(Z),inline:"","label-position":"top"},{default:s(()=>[r(t,{label:"\u58F0\u97F3\u540D\u79F0",prop:"name",style:{width:"100%"}},{default:s(()=>[r(p,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.name=o),maxlength:"10",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0\u6700\u591A10\u5B57\u7B26"},null,8,["modelValue"])]),_:1}),r(t,{label:"\u58F0\u97F3\u63CF\u8FF0",prop:"describe",style:{flex:"1"}},{default:s(()=>[r(p,{modelValue:e.value.describe,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.describe=o),maxlength:"10",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u6700\u591A10\u5B57\u7B26"},null,8,["modelValue"])]),_:1}),r(t,{label:"\u6027\u522B",style:{width:"100px"}},{default:s(()=>[r(J,{modelValue:e.value.sex,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.sex=o),style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9"},{default:s(()=>[(B(!0),q(G,null,M(f.value,o=>(B(),D(x,{key:o.label,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(t,{class:"readEssay"},{label:s(()=>[se,V(r(C,{type:"primary",size:"small",onClick:A},{default:s(()=>[I("\u751F\u6210\u8303\u6587")]),_:1},512),[[K,!c.value]])]),default:s(()=>[c.value?(B(),D(ue,{key:0,voiceId:n.value,reads:u.value,beforeUpload:S,uploadSuccessed:N,onSetReadsItemUrl:U},null,8,["voiceId","reads"])):O("",!0)]),_:1}),g("div",re,[r(C,{type:"primary",onClick:z},{default:s(()=>[I(" \u63D0\u4EA4\u514B\u9686\uFF08"+k(E.value)+"/"+k(u.value.length)+") ",1)]),_:1})])]),_:1},8,["model","rules"])),[[R,F.value,void 0,{fullscreen:!0,lock:!0}]])}}}),fe=Q(ne,[["__scopeId","data-v-117f301b"]]);export{fe as default};
