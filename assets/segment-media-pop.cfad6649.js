var c=(M,p,n)=>new Promise((f,l)=>{var g=t=>{try{s(n.next(t))}catch(a){l(a)}},d=t=>{try{s(n.throw(t))}catch(a){l(a)}},s=t=>t.done?f(t.value):Promise.resolve(t.value).then(g,d);s((n=n.apply(M,p)).next())});import{u as U}from"./material.85a80f57.js";import{j as E,k as I,d as N}from"./creative.ea528d59.js";import{d as T,r as u,U as h,j as y,o as j,b as F,w as v,k as C,n as k,a as _,t as P,_ as R,E as m}from"./index.5a90395c.js";import"./keyword.011c6f30.js";const A={class:"video"},O=["src"],$={class:"bar"},q=T({__name:"segment-media-pop",setup(M,{expose:p}){const n=U(),{getlistMedia:f}=n,l=u(!1),g=u("\u89C6\u9891\u7D20\u6750\u5206\u5272"),d=u(),s=u(""),t=u(""),a=u([0,0]),i=u(0),D=()=>c(this,null,function*(){let{code:o,data:e,msg:x}=yield E({id:s.value});o==200?(t.value=e.media_url,i.value=parseInt(e.duration),a.value[1]=i.value):m.error(x)}),V=()=>c(this,null,function*(){let{code:o,msg:e}=yield I({id:s.value,cut_start:a.value[0],cut_end:a.value[1]});o==200?(w(),m.success("\u89C6\u9891\u5206\u5272\u6210\u529F"),l.value=!1):m.error(e)}),w=()=>c(this,null,function*(){let{code:o,msg:e}=yield N({id:s.value});o!==200&&m.error(e),f()});h(a,(o,e)=>{o[0]!==e[0]?d.value.currentTime=o[0]:o[1]!==e[1]&&(d.value.currentTime=o[1])},{deep:!0});const B=()=>{s.value="",t.value="",a.value=[0,0],i.value=0};return p({dialogVisible:l,mediaId:s}),(o,e)=>{const x=y("el-slider"),b=y("el-button"),S=y("el-dialog");return j(),F(S,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value=r),title:g.value,width:"650",draggable:"","destroy-on-close":"",onOpen:D,onClosed:B},{footer:v(()=>[C(b,{onClick:e[1]||(e[1]=r=>l.value=!1)},{default:v(()=>[k("\u53D6\u6D88")]),_:1}),C(b,{type:"primary",onClick:V},{default:v(()=>[k("\u786E\u5B9A")]),_:1})]),default:v(()=>[_("div",A,[_("video",{ref_key:"videoRef",ref:d,src:t.value},null,8,O)]),_("div",$,[C(x,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r),range:"",step:.01,max:i.value},null,8,["modelValue","max"]),_("span",null,P((a.value[1]-a.value[0]).toFixed(2))+" s",1)])]),_:1},8,["modelValue","title"])}}}),L=R(q,[["__scopeId","data-v-cd7f83b8"]]);export{L as default};
