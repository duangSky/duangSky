var O=Object.defineProperty,U=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var A=(t,s,e)=>s in t?O(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,b=(t,s)=>{for(var e in s||(s={}))K.call(s,e)&&A(t,e,s[e]);if(w)for(var e of w(s))T.call(s,e)&&A(t,e,s[e]);return t},N=(t,s)=>U(t,j(s));var B=(t,s,e)=>new Promise((r,_)=>{var i=a=>{try{l(e.next(a))}catch(n){_(n)}},o=a=>{try{l(e.throw(a))}catch(n){_(n)}},l=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,o);l((e=e.apply(t,s)).next())});import{a as q}from"./music-card.2b625142.js";import{d as R,j as h,v as V,o as f,b as E,w as C,A as F,c as M,F as G,y as J,x as Q,k as g,a as L,_ as P,r as d,n as W,E as X}from"./index.5a90395c.js";import{b as Y}from"./index.89ddba91.js";const Z={class:"musicList","infinite-scroll-immediate":!1},ee=["onClick"],se={class:"selectedIco"},te=R({__name:"music-list",props:{musics:{type:Array,defalut:[]},slescted:{type:Array,defalut:[]}},emits:["handleNextPage","handleSelect"],setup(t,{expose:s,emit:e}){const r=e,_=t,i=()=>{r("handleNextPage")},o=a=>{r("handleSelect",a)},l=a=>_.slescted.some(n=>n.id===a.id);return s({isSelected:l}),(a,n)=>{const x=h("Check"),p=h("el-icon"),k=h("el-scrollbar"),y=V("infinite-scroll");return f(),E(k,null,{default:C(()=>[F((f(),M("div",Z,[(f(!0),M(G,null,J(t.musics,m=>(f(),M("div",{class:Q(["item",{selected:l(m)}]),key:m.id,onClick:S=>o(m)},[g(q,{music:m,isShowUse:""},null,8,["music"]),L("div",se,[g(p,null,{default:C(()=>[g(x)]),_:1})])],10,ee))),128))])),[[y,i]])]),_:1})}}}),le=P(te,[["__scopeId","data-v-2d02310e"]]);const ae={class:"addBtn"},ne=R({__name:"RecommendMusic",props:{mode:{type:String,default:"choice"}},emits:["handleAddMusic"],setup(t,{expose:s,emit:e}){const r=t,_=e,i=d(!1),o=d([]),l=d([]),a=d(),n=d(!1),x=d(),p=d({page:1,limit:16}),k=()=>{y()},y=()=>B(this,null,function*(){n.value=!0;let{code:c,data:u,msg:v}=yield Y(p.value);c==200?(o.value=[...o.value,...u.list],a.value=u.total):X.error(v),n.value=!1}),m=()=>{o.value.length>=a.value||n.value||(p.value.page++,y())},S=c=>{if(r.mode==="radio")l.value=[c];else{let u=N(b({},c),{time:c.duration,interval:[0,c.duration]});x.value.isSelected(c)?l.value=l.value.filter(v=>v.id!==c.id):l.value.push(u)}},D=()=>{_("handleAddMusic",l.value),i.value=!1},H=()=>{l.value=[],p.value.page=1,o.value=[]};return s({drawer:i,slescted:l}),(c,u)=>{const v=h("el-button"),I=h("el-drawer"),$=V("loading");return f(),E(I,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=z=>i.value=z),title:"\u63A8\u8350\u97F3\u4E50",size:"420",onOpen:k,onClose:H},{default:C(()=>[F(g(le,{ref_key:"musicsRef",ref:x,musics:o.value,slescted:l.value,onHandleSelect:S,onHandleNextPage:m},null,8,["musics","slescted"]),[[$,n.value]]),L("div",ae,[g(v,{type:"primary",onClick:D},{default:C(()=>[W("\u6DFB\u52A0\u97F3\u4E50")]),_:1})])]),_:1},8,["modelValue"])}}}),de=P(ne,[["__scopeId","data-v-0b67ffff"]]);export{de as R};
