var L=(b,h,u)=>new Promise((i,c)=>{var F=t=>{try{d(u.next(t))}catch(_){c(_)}},l=t=>{try{d(u.throw(t))}catch(_){c(_)}},d=t=>t.done?i(t.value):Promise.resolve(t.value).then(F,l);d((u=u.apply(b,h)).next())});import{d as N,r as x,P as S,g as j,u as z,h as U,i as A,j as n,o as P,b as q,w as o,k as e,l as g,m as I,a as s,n as V,R as O,E as C}from"./index.5a90395c.js";import{P as G,L as K}from"./PersonOutline.ce39648a.js";import{L as M,a as T}from"./LogoGithub.13df8618.js";const H={class:"mb-6 default-color"},J={class:"flex justify-between"},Q={class:"flex-initial"},W=s("div",{class:"flex-initial order-last"},[s("a",{href:"javascript:"},"\u5FD8\u8BB0\u5BC6\u7801")],-1),X={class:"mb-4 default-color"},Y={class:"flex view-account-other"},Z=s("div",{class:"flex-initial"},[s("span",null,"\u5176\u5B83\u767B\u5F55\u65B9\u5F0F")],-1),$={class:"flex-initial mx-2"},ee={href:"javascript:"},se={class:"flex-initial mx-2"},oe={href:"javascript:"},re=N({__name:"LoginForm",emits:["goRegister"],setup(b,{emit:h}){const u=x(),i=x(!1),c=x(!0),F=S.BASE_LOGIN_NAME,l=j({username:"",password:""}),d={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},password:{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}},t=h,_=z(),k=U(),y=A(),E=()=>{!u.value||u.value.validate(R=>L(this,null,function*(){var a;if(R){const{username:r,password:p}=l;i.value=!0;const m={username:r,password:p};try{const{code:v,message:B}=yield _.login(m);if(v==O.SUCCESS){const w=decodeURIComponent(((a=y.query)==null?void 0:a.redirect)||"/");C.success("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8FDB\u5165\u7CFB\u7EDF"),y.name===F?k.replace("/"):k.replace(w)}else C.error(B||"\u767B\u5F55\u5931\u8D25")}finally{i.value=!1}}else C({message:"\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F",type:"error"})}))};function D(){t("goRegister")}return(R,a)=>{const r=n("el-icon"),p=n("el-input"),m=n("el-form-item"),v=n("el-checkbox"),B=n("el-button"),w=n("el-form");return P(),q(w,{ref_key:"formRef",ref:u,"show-label":!1,"show-require-mark":!1,size:"large",model:l,rules:d},{default:o(()=>[e(m,{prop:"username"},{default:o(()=>[e(p,{modelValue:l.username,"onUpdate:modelValue":a[0]||(a[0]=f=>l.username=f),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{prefix:o(()=>[e(r,{class:"el-input__icon",size:"18",color:"#808695"},{default:o(()=>[e(g(G))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"password"},{default:o(()=>[e(p,{modelValue:l.password,"onUpdate:modelValue":a[1]||(a[1]=f=>l.password=f),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeyup:I(E,["enter"])},{prefix:o(()=>[e(r,{class:"el-input__icon",size:"18",color:"#808695"},{default:o(()=>[e(g(K))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),_:1}),s("div",H,[s("div",J,[s("div",Q,[e(v,{checked:c.value,"onUpdate:checked":a[2]||(a[2]=f=>c.value=f)},{default:o(()=>[V("\u81EA\u52A8\u767B\u5F55")]),_:1},8,["checked"])]),W])]),e(m,{"show-label":!1},{default:o(()=>[e(B,{class:"w-full",type:"primary",onClick:E,size:"large",loading:i.value},{default:o(()=>[V(" \u767B\u5F55 ")]),_:1},8,["loading"])]),_:1}),s("div",X,[s("div",Y,[Z,s("div",$,[s("a",ee,[e(r,{class:"el-input__icon",size:"24",color:"#2d8cf0"},{default:o(()=>[e(g(M))]),_:1})])]),s("div",se,[s("a",oe,[e(r,{class:"el-input__icon",size:"24",color:"#2d8cf0"},{default:o(()=>[e(g(T))]),_:1})])]),s("div",{class:"flex-initial",style:{"margin-left":"auto"}},[s("a",{href:"javascript:",onClick:D},"\u6CE8\u518C\u8D26\u53F7")])])])]),_:1},8,["model"])}}});export{re as default};
