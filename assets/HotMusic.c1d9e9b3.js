var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var H=(l,t,e)=>t in l?W(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,E=(l,t)=>{for(var e in t||(t={}))Z.call(t,e)&&H(l,e,t[e]);if(B)for(var e of B(t))ee.call(t,e)&&H(l,e,t[e]);return l},N=(l,t)=>X(l,Y(t));var S=(l,t,e)=>new Promise((i,r)=>{var _=s=>{try{a(e.next(s))}catch(u){r(u)}},c=s=>{try{a(e.throw(s))}catch(u){r(u)}},a=s=>s.done?i(s.value):Promise.resolve(s.value).then(_,c);a((e=e.apply(l,t)).next())});import{m as te}from"./music-card.2b625142.js";import{d as F,j as p,v as L,o as f,b as V,w as x,A as I,c as b,F as P,y as T,x as se,k as y,a as U,_ as $,r as d,n as le,E as D}from"./index.5a90395c.js";import{g as ae,a as oe}from"./index.89ddba91.js";const ne={class:"musicList","infinite-scroll-immediate":!1},ce=["onClick"],ie={class:"selectedIco"},ue=F({__name:"music-list",props:{musics:{type:Array,defalut:[]},slescted:{type:Array,defalut:[]}},emits:["handleNextPage","handleSelect"],setup(l,{expose:t,emit:e}){const i=e,r=l,_=()=>{i("handleNextPage")},c=s=>{i("handleSelect",s)},a=s=>r.slescted.some(u=>u.id===s.id);return t({isSelected:a}),(s,u)=>{const g=p("Check"),C=p("el-icon"),k=p("el-scrollbar"),M=L("infinite-scroll");return f(),V(k,null,{default:x(()=>[I((f(),b("div",ne,[(f(!0),b(P,null,T(l.musics,h=>(f(),b("div",{class:se(["item",{selected:a(h)}]),key:h.id,onClick:A=>c(h)},[y(te,{music:h,isShowUse:""},null,8,["music"]),U("div",ie,[y(C,null,{default:x(()=>[y(g)]),_:1})])],10,ce))),128))])),[[M,_]])]),_:1})}}}),de=$(ue,[["__scopeId","data-v-6fcdf4c6"]]);const re={class:"addBtn"},_e=F({__name:"HotMusic",props:{mode:{type:String,default:"choice"}},emits:["handleAddMusic"],setup(l,{expose:t,emit:e}){const i=d(!1),r=d([]),_=d(""),c=d([]),a=d([]),s=d(!1),u=d(),g=d({page:1,limit:16}),C=d(0),k=e,M=l,h=()=>{A()},A=()=>S(this,null,function*(){let{code:o,data:n,msg:m}=yield ae();o==200?(r.value=n.reverse(),_.value=r.value[0].collection_id,w()):D.error(m)}),w=()=>S(this,null,function*(){s.value=!0;let{code:o,data:n,msg:m}=yield oe(E({collection:_.value},g.value));o==200?(c.value=[...c.value,...n.list],C.value=n.total):D.error(m),s.value=!1}),z=()=>{g.value.page=1,c.value=[],w()},O=()=>{c.value.length>=C.value||s.value||(console.log("\u4E0B\u4E00\u9875"),g.value.page++,w())},R=o=>{if(M.mode==="radio")a.value=[o];else{let n=N(E({},o),{time:o.duration,interval:[0,o.duration]});u.value.isSelected(o)?a.value=a.value.filter(m=>m.id!==o.id):a.value.push(n)}},j=()=>{k("handleAddMusic",a.value),i.value=!1},q=()=>{a.value=[],g.value.page=1,c.value=[]};return t({drawer:i,slescted:a}),(o,n)=>{const m=p("el-tab-pane"),G=p("el-tabs"),J=p("el-button"),K=p("el-drawer"),Q=L("loading");return f(),V(K,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=v=>i.value=v),title:"\u70ED\u95E8\u97F3\u4E50",size:"420",onOpen:h,onClose:q},{default:x(()=>[y(G,{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=v=>_.value=v),onTabChange:z},{default:x(()=>[(f(!0),b(P,null,T(r.value,v=>(f(),V(m,{key:v.collection_id,label:v.collection_name,name:v.collection_id},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),I(y(de,{ref_key:"musicsRef",ref:u,musics:c.value,slescted:a.value,onHandleSelect:R,onHandleNextPage:O},null,8,["musics","slescted"]),[[Q,s.value]]),U("div",re,[y(J,{type:"primary",onClick:j},{default:x(()=>[le("\u6DFB\u52A0\u97F3\u4E50")]),_:1})])]),_:1},8,["modelValue"])}}}),ge=$(_e,[["__scopeId","data-v-456d600e"]]);export{ge as H};
