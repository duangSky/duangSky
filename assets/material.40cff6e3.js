var re=Object.defineProperty,ce=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var P=(a,t,e)=>t in a?re(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,j=(a,t)=>{for(var e in t||(t={}))de.call(t,e)&&P(a,e,t[e]);if(L)for(var e of L(t))me.call(t,e)&&P(a,e,t[e]);return a},z=(a,t)=>ce(a,pe(t));var D=(a,t,e)=>new Promise((m,v)=>{var c=o=>{try{p(e.next(o))}catch(w){v(w)}},u=o=>{try{p(e.throw(o))}catch(w){v(w)}},p=o=>o.done?m(o.value):Promise.resolve(o.value).then(c,u);p((e=e.apply(a,t)).next())});import{d as X,r,o as y,c as $,a as h,N as O,O as ve,_ as H,a0 as fe,j as S,k as s,w as n,A as q,J,l as _,a1 as _e,n as k,b as V,q as M,F as ge,E as g,B as he,p as we,f as ye}from"./index.5a90395c.js";import{u as Be}from"./material.85a80f57.js";import Ee from"./material-group.76a6f0ed.js";import ke from"./source-materials.cc745643.js";import be from"./oral-broad.f1373a95.js";import Fe from"./material-group-pop.5469c6cf.js";import Ce from"./move-media-pop.366157bc.js";import De from"./edit-tags-pop.0a6796bf.js";import{d as Me,l as U}from"./creative.ea528d59.js";import"./keyword.011c6f30.js";import"./material-structure.99435468.js";import"./waterfall-flow.399a1b0f.js";import"./index.browser.2b0920b0.js";import"./MediumPreview.37c6af48.js";import"./dateUtil.67c53eed.js";import"./edit-media-pop.f608703f.js";import"./segment-media-pop.cfad6649.js";import"./cut-media-pop.faccb4e7.js";import"./useModal.fe9d85cc.js";import"./base64Conver.96a5c530.js";import"./audio.531569af.js";import"./downloadFile.9a38d16c.js";import"./AliCloudUpload.13488d40.js";import"./index.1143cf66.js";import"./download.71eecab8.js";import"./Pagination.554cb32d.js";import"./config.d0c812d6.js";import"./lodash.a9e36c73.js";const xe={class:"box"},Ge={class:"right"},Ne=X({__name:"Draw",props:{minWidth:{type:Number,default:210},maxWidth:{type:Number,default:280}},setup(a){const t=r(),e=r(210),m=a,v=()=>{document.addEventListener("mousemove",c)},c=u=>{let p=u.pageX-t.value.getBoundingClientRect().left;e.value+=p,e.value<m.minWidth?e.value=m.minWidth:e.value>m.maxWidth&&(e.value=m.maxWidth)};return document.onmouseup=()=>{document.removeEventListener("mousemove",c)},(u,p)=>(y(),$("div",xe,[h("div",{class:"left",style:ve(`width: ${e.value}px`)},[O(u.$slots,"left",{},void 0,!0)],4),h("div",{class:"resize",ref_key:"draw",ref:t,onMousedown:v},null,544),h("div",Ge,[O(u.$slots,"right",{},void 0,!0)])]))}}),Te=H(Ne,[["__scopeId","data-v-16f9de88"]]);const Se=a=>(we("data-v-f782fcac"),a=a(),ye(),a),Ve={class:"material"},$e={class:"top"},Ae=Se(()=>h("span",null,"\u6211\u7684\u7D20\u6750",-1)),Re={class:"operate"},We=X({__name:"material",setup(a){const t=r(""),e=r(),m=r(),v=r(),c=r(!1),u=r([]),p=r(0),o=r("first"),w=Be(),B=r({page:1,limit:18}),{isBulk:A,groupId:R,checklist:b,materials:W,loading:K}=fe(w),{setBulk:F,getkeywords:Q,getBaseTags:Y,getlistMedia:Z}=w,ee=()=>{F(!1),W.value=[],R.value="",G()};Q(),Y();const te=()=>D(this,null,function*(){c.value=!0;let i=z(j({},B.value),{filter:{type:0},op:{type:"="}});t.value&&(i.filter.name=t.value,i.op.name="like");const{code:l,data:d,msg:f}=yield U(i);l==200?(u.value=[...u.value,...d.list],p.value=d.total):g.error(f),c.value=!1}),x=()=>{o.value==="first"?te():console.log("\u83B7\u53D6\u53E3\u64AD\u7D20\u6750\u7EC4")};x();const ae=()=>{u.value.length<p.value&&(B.value.page++,x())},G=()=>{B.value.page=1,u.value=[],x()},C=i=>D(this,null,function*(){const l=u.value.findIndex(T=>T.id===i);let d=Math.ceil((l+1)/B.value.limit);c.value=!0;let f={page:d,limit:B.value.limit,filter:{type:0},op:{type:"="}};const{code:N,data:E,msg:ie}=yield U(f);if(N==200){let T=E.list.find(ne=>ne.id===i);u.value[l]=T}else g.error(ie);c.value=!1}),I=({currentId:i,moveId:l})=>{C(i),C(l)},oe=()=>{e.value.dialogVisible=!0},le=()=>{if(!b.value.length){g.warning("\u8BF7\u52FE\u9009\u8981\u79FB\u52A8\u7684\u6587\u4EF6");return}m.value.dialogVisible=!0},ue=()=>{if(!b.value.length){g.warning("\u8BF7\u52FE\u9009\u8981\u8BBE\u7F6E\u7684\u6587\u4EF6");return}v.value.dialogVisible=!0},se=()=>{if(!b.value.length){g.warning("\u8BF7\u52FE\u9009\u8981\u5220\u9664\u7684\u6587\u4EF6");return}he.alert("\u786E\u5B9A\u6279\u91CF\u5220\u9664\u9009\u4E2D\u7D20\u6750\uFF1F","\u63D0\u793A",{type:"warning",showCancelButton:!0}).then(()=>D(this,null,function*(){let{code:i,msg:l}=yield Me({filter:{id:b.value},op:{id:"in"}});i==200?(F(!1),g.success("\u5220\u9664\u6210\u529F"),Z(),C(R.value)):g.error(l)})).catch(()=>{console.log("\u53D6\u6D88\u5220\u9664")})};return(i,l)=>{const d=S("el-button"),f=S("el-tab-pane"),N=S("el-tabs");return y(),$("div",Ve,[s(Te,null,{left:n(()=>[h("div",$e,[Ae,q(s(d,{type:"primary",icon:_(_e),onClick:oe},{default:n(()=>[k("\u521B\u5EFA")]),_:1},8,["icon"]),[[J,o.value==="first"]])]),s(Ee,{showTotal:o.value==="first",fileGroup:u.value,fileTotal:p.value,activeName:o.value,groupLoading:c.value,onNextPage:ae,onRenewGroup:G},null,8,["showTotal","fileGroup","fileTotal","activeName","groupLoading"])]),right:n(()=>[s(N,{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=E=>o.value=E),onTabChange:ee},{default:n(()=>[s(f,{label:"\u7D20\u6750",name:"first"},{default:n(()=>[o.value==="first"?(y(),V(ke,{key:0,onReplaceGroup:C,onReplaceMoveGroup:I})):M("",!0)]),_:1}),s(f,{label:"\u53E3\u64AD",name:"second"},{default:n(()=>[o.value==="second"?(y(),V(be,{key:0})):M("",!0)]),_:1}),o.value==="first"?(y(),V(f,{key:0,disabled:""},{label:n(()=>[h("div",Re,[q(s(d,{plain:"",disabled:!_(W).length||_(K),onClick:l[0]||(l[0]=E=>_(F)(!0))},{default:n(()=>[k("\u6279\u91CF\u64CD\u4F5C")]),_:1},8,["disabled"]),[[J,!_(A)]]),_(A)?(y(),$(ge,{key:0},[s(d,{plain:"",onClick:le},{default:n(()=>[k("\u79FB\u52A8\u5230")]),_:1}),s(d,{plain:"",onClick:ue},{default:n(()=>[k("\u6807\u7B7E\u8BBE\u7F6E")]),_:1}),s(d,{plain:"",onClick:se},{default:n(()=>[k("\u5220\u9664")]),_:1}),h("span",{class:"cancel",onClick:l[1]||(l[1]=E=>_(F)(!1))},"\u53D6\u6D88")],64)):M("",!0)])]),_:1})):M("",!0)]),_:1},8,["modelValue"])]),_:1}),s(Fe,{ref_key:"groupPop",ref:e,activeName:o.value,onRenewGroup:G},null,8,["activeName"]),s(Ce,{ref_key:"MoveMmedia",ref:m,onReplaceMoveGroup:I},null,512),s(De,{ref_key:"EditTags",ref:v,isBatch:!0},null,512)])}}}),vt=H(We,[["__scopeId","data-v-f782fcac"]]);export{vt as default};
