var _=(u,p,a)=>new Promise((n,s)=>{var r=e=>{try{t(a.next(e))}catch(l){s(l)}},i=e=>{try{t(a.throw(e))}catch(l){s(l)}},t=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,i);t((a=a.apply(u,p)).next())});import{d as E,u as x,r as D,j as v,o as f,c as F,a as o,t as c,F as I,y as R,n as y,l as A,k as w,m as S,w as V,_ as k,E as m,p as C,f as L}from"./index.5a90395c.js";import{C as b,D as K}from"./account.f146a620.js";import{f as N}from"./dateUtil.67c53eed.js";const h=u=>(C("data-v-623647c8"),u=u(),L(),u),T={class:"follow-records"},j={class:"tips"},z={class:"person"},M=h(()=>o("span",null,"\u5F53\u524D\u8DDF\u8FDB\u4EBA\uFF1A",-1)),U={class:"follow"},O={class:"top"},q=h(()=>o("span",{style:{"font-weight":"700"}},"\xB7",-1)),G={class:"txt"},H={class:"foot-add"},J=E({__name:"follow-records",props:{customInfo:{type:Object,default:()=>{}}},setup(u){const p=x(),a=u,n=D([]),s=D("");r();function r(){return _(this,null,function*(){let{code:t,data:e,count:l}=yield b({id:a.customInfo.id,type:"leads",page:1,limit:9999});t==200&&(n.value=e.reverse())})}function i(){return _(this,null,function*(){if(!s.value)return m.warning("\u8BF7\u8F93\u5165\u8DDF\u8FDB\u8BB0\u5F55");let{code:t,msg:e}=yield K({id:[a.customInfo.id],type:"leads",staff:p.info.companyname,record:s.value});t==200?(s.value="",m.success("\u6DFB\u52A0\u8DDF\u8FDB\u8BB0\u5F55\u6210\u529F"),r()):m.error(e)})}return(t,e)=>{var B;const l=v("el-input"),g=v("el-button");return f(),F("div",T,[o("div",j,"\u5F53\u524D\u6709"+c(n.value.length)+"\u6761\u8DDF\u8FDB\u8BB0\u5F55",1),o("div",z,[M,o("span",null,c(((B=n.value[0])==null?void 0:B.staff)||"\u6682\u65E0\u8DDF\u8FDB\u4EBA"),1)]),o("div",U,[(f(!0),F(I,null,R(n.value,d=>(f(),F("div",{class:"follow-item",key:d.id},[o("div",O,[o("span",null,c(d.staff||"\u65E0"),1),o("span",null,[q,y(" "+c(A(N)(d.createtime)),1)])]),o("div",G,c(d.record),1)]))),128))]),o("div",H,[w(l,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=d=>s.value=d),modelModifiers:{trim:!0},size:"default",placeholder:"\u8BF7\u8F93\u5165\u8DDF\u8FDB\u8BB0\u5F55",onKeydown:S(i,["enter","native"])},null,8,["modelValue","onKeydown"]),w(g,{type:"primary",size:"default",onClick:i},{default:V(()=>[y("\u6DFB\u52A0\u8DDF\u8FDB\u8BB0\u5F55")]),_:1})])])}}}),Y=k(J,[["__scopeId","data-v-623647c8"]]);export{Y as default};
