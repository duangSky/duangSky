var O=Object.defineProperty;var q=(s,e,o)=>e in s?O(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var V=(s,e,o)=>(q(s,typeof e!="symbol"?e+"":e,o),o);var D=(s,e,o)=>new Promise((r,l)=>{var p=a=>{try{c(o.next(a))}catch(i){l(i)}},u=a=>{try{c(o.throw(a))}catch(i){l(i)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(p,u);c((o=o.apply(s,e)).next())});import{d as B,j as h,o as R,c as y,k as m,w as g,F as z,y as U,a as n,t as M,_ as $,l as N,E as S,r as v,v as K,b as j,A as w,J as E,z as b,N as P,q as J,s as X,W as G,p as Q,f as Y}from"./index.5a90395c.js";import{u as Z}from"./useCopyToClipboard.fba770f6.js";import{r as ee}from"./aitools.ae73576d.js";const te={class:"txt_list"},se={class:"operate"},oe=["onClick"],le=["onClick"],ne=["onClick"],ae=B({__name:"txt-list",props:{IptRef:{type:Object,default:{}},list:{type:Array,required:!0}},setup(s){const{clipboardRef:e,copiedRef:o}=Z(),r=s,l=u=>{e.value=u,N(o)&&S.success("\u590D\u5236\u6210\u529F")},p=(u,c)=>{let a=r.IptRef.getSelectText(),i=r.IptRef.getCursorStart();c=="add"?(r.IptRef.setRangeText(a+u),r.IptRef.setSelectionRange(i,i+a.length+u.length)):(r.IptRef.setRangeText(u),r.IptRef.setSelectionRange(i,i+u.length))};return(u,c)=>{const a=h("el-scrollbar");return R(),y("div",te,[m(a,null,{default:g(()=>[(R(!0),y(z,null,U(s.list,(i,d)=>(R(),y("div",{class:"txt_item",key:d},[n("span",null,M(i),1),n("div",se,[n("span",{onClick:f=>l(i)},"\u590D\u5236",8,oe),n("span",{onClick:f=>p(i,"replace")},"\u66FF\u6362",8,le),n("span",{onClick:f=>p(i,"add")},"\u6DFB\u52A0",8,ne)])]))),128))]),_:1})])}}}),ue=$(ae,[["__scopeId","data-v-21976543"]]);class L{constructor(e){V(this,"iptRef");this.iptRef=e}setFocus(){this.iptRef.focus()}setRangeText(e){this.iptRef.setRangeText(e)}setSelectionRange(e,o){this.iptRef.setSelectionRange(e,o)}setSelectAll(){this.iptRef.select()}getSelectText(){return window.getSelection().toString()}getCursorStart(){return this.iptRef.selectionStart}getValue(){return this.iptRef.value}}const ie=s=>({1:"\u5E2E\u6211\u5199",2:"\u6539\u5199",3:"\u6269\u5199",4:"\u7F29\u5199"})[s];const re={class:"head"},pe={class:"title"},ce={class:"content"},de={class:"ipt"},ve={class:"close"},fe={class:"closePop"},_e=B({__name:"help-write",props:{IptRef:{type:Object,default:{}},iptValue:{type:String,default:""}},setup(s,{expose:e}){const o=v(!1),r=v(!1),l=v(!1),p=v(""),u=v(1),c=v([]),a=s,i=()=>{l.value=!0},d=()=>{a.IptRef.setFocus()},f=_=>{if(!p.value)return S.warning("\u8BF7\u8F93\u5165\u5185\u5BB9");a.IptRef.setFocus(),u.value=_,I(p.value)},C=_=>{let t=a.IptRef.getSelectText();if(!t)return S.warning("\u8BF7\u5212\u8BCD\u9009\u4E2D\u5173\u952E\u8BCD");u.value=_,I(t)},I=_=>D(this,null,function*(){r.value=!0,o.value=!0;let{code:t,data:k,msg:F}=yield ee({opType:u.value,content:_});t==200?c.value=k.content:S.error(F),o.value=!1}),T=()=>{if(o.value)return;let _=a.IptRef.getValue(),t=c.value.join(`
`);_.length&&(t=`
`+t),a.IptRef.setRangeText(t)},A=()=>{l.value=!1,p.value=""},W=()=>{l.value=!1,p.value="",a.IptRef.setFocus()};return e({popShow:r}),(_,t)=>{const k=h("el-input"),F=h("el-popover"),H=K("selfLoading");return R(),j(F,{width:"560",visible:r.value,"popper-style":"padding: 0;","show-arrow":!1,teleported:!1,trigger:"contextmenu",onBeforeLeave:A},{reference:g(()=>[n("div",ce,[n("div",de,[m(k,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=x=>p.value=x),placeholder:"\u5E2E\u6211\u5199",onFocus:i,onBlur:d},null,8,["modelValue"]),w(n("span",{onClick:t[2]||(t[2]=x=>f(1)),onMousedown:t[3]||(t[3]=b(()=>{},["prevent"]))},"\u786E\u5B9A",544),[[E,l.value]])]),w(n("div",ve,[n("span",{onClick:W},"\u5173\u95ED")],512),[[E,l.value]]),w(n("div",{class:"optimize",onMousedown:t[7]||(t[7]=b(()=>{},["prevent"]))},[n("span",{onClick:t[4]||(t[4]=x=>C(2))},"\u6539\u5199"),n("span",{onClick:t[5]||(t[5]=x=>C(3))},"\u6269\u5199"),n("span",{onClick:t[6]||(t[6]=x=>C(4))},"\u7F29\u5199")],544),[[E,!l.value&&s.iptValue]]),n("div",fe,[P(_.$slots,"close",{},void 0,!0)])])]),default:g(()=>[n("div",{class:"list",onMousedown:t[0]||(t[0]=b(()=>{},["prevent"]))},[n("div",re,[n("span",pe,M(N(ie)(u.value)),1),u.value===1?(R(),y("span",{key:0,class:"add",onClick:T},"\u6309\u987A\u5E8F\u6DFB\u52A0\u5168\u90E8")):J("",!0)]),w(m(ue,{IptRef:s.IptRef,list:c.value},null,8,["IptRef","list"]),[[H,o.value]])],32)]),_:3},8,["visible"])}}}),ge=$(_e,[["__scopeId","data-v-62834e6a"]]);const he=s=>(Q("data-v-3bbf97ba"),s=s(),Y(),s),Re={class:"showPop"},me=he(()=>n("span",null,"ai\u5E2E\u5199",-1)),Ce=[me],xe=B({__name:"AIToolPop",props:{iptValue:{type:String,required:!0},placement:{type:String,default:"top-start"}},setup(s){const e=v(!1),o=v(!1),r=v(),l=v(),p=v();X(()=>{let d=r.value.firstElementChild.firstElementChild;d.nodeName=="TEXTAREA"?l.value=new L(d):d.firstElementChild.nodeName=="INPUT"&&(l.value=new L(d.firstElementChild)),l.value.iptRef.addEventListener("focus",u),l.value.iptRef.addEventListener("blur",c)});const u=()=>{e.value||(o.value=!0)},c=()=>{o.value=!1},a=()=>{let d=l.value.getSelectText();d||(l.value.setSelectAll(),d=l.value.getSelectText()),e.value=!0,o.value=!1},i=()=>{p.value.popShow=!1};return G(()=>{l.value.iptRef.removeEventListener("focus",u),l.value.iptRef.removeEventListener("blur",c)}),(d,f)=>{const C=h("CircleClose"),I=h("el-icon"),T=h("el-popover");return R(),j(T,{width:"560",visible:e.value,teleported:!0,"show-arrow":!1,"popper-style":{borderRadius:"99px",padding:0},trigger:"contextmenu",placement:s.placement,onBeforeLeave:i},{reference:g(()=>[n("div",Re,[w(n("div",{class:"ai",onClick:a,onMousedown:f[1]||(f[1]=b(()=>{},["prevent"]))},Ce,544),[[E,o.value]]),n("div",{class:"ipt",ref_key:"boxRef",ref:r},[P(d.$slots,"iptBox",{},void 0,!0)],512)])]),default:g(()=>[m(ge,{ref_key:"helpRef",ref:p,IptRef:l.value,iptValue:s.iptValue},{close:g(()=>[m(I,{onClick:f[0]||(f[0]=A=>e.value=!1)},{default:g(()=>[m(C)]),_:1})]),_:1},8,["IptRef","iptValue"])]),_:3},8,["visible","placement"])}}}),Ee=$(xe,[["__scopeId","data-v-3bbf97ba"]]);export{Ee as A};
